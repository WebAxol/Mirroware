/*! For license information please see Mirroware.min.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./lib/frontend/Initializer.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _pluglightjs_World_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../../../pluglightjs/World.js */ "./vendor/pluglightjs/World.js");\n/* harmony import */ var _Services_Service_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Services/Service.js */ "./lib/frontend/Services/Service.js");\n/* harmony import */ var _setUp_setUp_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./setUp/setUp.js */ "./lib/frontend/setUp/setUp.js");\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");\n    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === "m") throw new TypeError("Private method is not writable");\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");\n    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _Initializer_instances, _Initializer_hasBeenInitialized, _Initializer_initAgentTypes, _Initializer_initCollections, _Initializer_initServices;\n\n\n\nclass Initializer {\n    constructor(world) {\n        _Initializer_instances.add(this);\n        _Initializer_hasBeenInitialized.set(this, false);\n        this.world = world;\n    }\n    init(setUp) {\n        if (__classPrivateFieldGet(this, _Initializer_hasBeenInitialized, "f")) {\n            console.warn(\'The Mirroware instance has already been initialized\');\n            return false;\n        }\n        if (typeof setUp !== \'object\') {\n            console.error(\'The setUp argument must be an object\');\n            return false;\n        }\n        __classPrivateFieldGet(this, _Initializer_instances, "m", _Initializer_initAgentTypes).call(this, setUp.agentTypes);\n        __classPrivateFieldGet(this, _Initializer_instances, "m", _Initializer_initCollections).call(this, setUp.collections);\n        __classPrivateFieldGet(this, _Initializer_instances, "m", _Initializer_initServices).call(this, setUp.services);\n        __classPrivateFieldSet(this, _Initializer_hasBeenInitialized, true, "f");\n        return true;\n    }\n}\n_Initializer_hasBeenInitialized = new WeakMap(), _Initializer_instances = new WeakSet(), _Initializer_initAgentTypes = function _Initializer_initAgentTypes(agentTypes) {\n    if (typeof agentTypes != \'object\') {\n        console.error(\'Cannot initialize agent types: the were not passed as an object embedded at setUp\');\n        return false;\n    }\n    const types = Object.keys(agentTypes);\n    types.forEach((typeName) => {\n        let prototype = agentTypes[typeName];\n        if (typeof prototype != \'object\') {\n            console.error(\'Each type must be a key value pair, mapping each type with a prototype for each object instanced with that type\');\n            return false;\n        }\n        this.world.registerAgentType(typeName, prototype);\n    });\n    return true;\n}, _Initializer_initCollections = function _Initializer_initCollections(collections) {\n    if (!(collections instanceof Array)) {\n        console.error("The field \'collections\' must be a string array with the names of each collection");\n        return false;\n    }\n    collections.forEach(collectionName => {\n        let registered = false;\n        if (typeof collectionName == \'string\' && collectionName != \'\')\n            registered = this.world.registerCollection(collectionName);\n        if (!registered)\n            console.error(`Collection named: \'${collectionName}\' could not be registered`);\n    });\n    return true;\n}, _Initializer_initServices = function _Initializer_initServices(services) {\n    if (typeof services != \'object\') {\n        console.error(\'Cannot initialize services: the were not passed as an object embedded at setUp\');\n        return false;\n    }\n    const serviceNames = Object.keys(services);\n    serviceNames.forEach((serviceName) => {\n        let serviceInstance = services[serviceName];\n        if (!(serviceInstance instanceof _Services_Service_js__WEBPACK_IMPORTED_MODULE_1__["default"])) {\n            console.error(`Cannot register service: "${serviceName}": it must be a key value pair, mapping each service name with an instance of its respective service`);\n        }\n        this.world.registerService(serviceName, serviceInstance);\n    });\n    return true;\n};\nconst app = new _pluglightjs_World_js__WEBPACK_IMPORTED_MODULE_0__["default"]();\nconst _init = new Initializer(app);\n_init.init(_setUp_setUp_js__WEBPACK_IMPORTED_MODULE_2__.appSetUp);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (app);\n//# sourceMappingURL=Initializer.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/Initializer.js?')},"./lib/frontend/Mirroware.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Initializer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Initializer.js */ \"./lib/frontend/Initializer.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ \"./lib/frontend/config.js\");\n/* harmony import */ var _utils_Camera_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/Camera.js */ \"./lib/frontend/utils/Camera.js\");\n/* harmony import */ var _utils_SceneBuilder_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/SceneBuilder.js */ \"./lib/frontend/utils/SceneBuilder.js\");\n\n\n\n\nconst n = _config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].resolution;\nfor (let i = 0; i < n; i++) {\n    let ray = _Initializer_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createAgent('Ray', {\n        'info': {\n            degree: (i * (100 / n))\n        }\n    });\n    ray.source = _utils_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera;\n    _utils_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.rays.push(ray);\n}\nconst testScene = [\n    { type: 'Wall', info: [[5, 5], [5, 25], 1, '255,255,0'] },\n    { type: 'Wall', info: [[10, 5], [10, -20], 1, '0,255,0'] },\n    { type: 'Wall', info: [[12, 5], [12, -20], 1, '255,0,0'] },\n    { type: 'Wall', info: [[5, -24], [5, -25], 1, '255,0,100'] },\n    { type: 'Wall', info: [[5, -21], [5, -20], 1, '0,255,100'] },\n    { type: 'Wall', info: [[5, -21], [-20, -21], 1, '0,255,0'] },\n    { type: 'Wall', info: [[5, -24], [-20, -24], 1, '255,0,100'] },\n    { type: 'Wall', info: [[5, -20], [10, -20], 1, '0,255,100'] },\n    { type: 'Wall', info: [[12, -20], [25, -20], 1, '0,255,100'] },\n    { type: 'Wall', info: [[5, -25], [35, -25], 1, '255,157,0'] },\n    { type: 'Wall', info: [[25, -20], [25, -25], 1, '255,157,0'] },\n    { type: 'Wall', info: [[-25, -20], [-25, -25], 1, '255,157,0'] },\n    { type: 'Wall', info: [[5, 5], [10, 5], 1, '0,255,100'] },\n    { type: 'Wall', info: [[12, 5], [25, 5], 1, '0,255,100'] },\n    { type: 'Wall', info: [[5, 7], [7, 7], 1, '0,255,100'] },\n    { type: 'Wall', info: [[7, 5], [7, 7], 1, '0,255,200'] },\n    { type: 'Wall', info: [[7, 15], [7, 20], 1, '0,155,200'] },\n    { type: 'Wall', info: [[7, 20], [15, 20], 0.9, '255,0,0'] },\n    { type: 'Wall', info: [[7, 15], [15, 15], 0.9, '0,100,100'] },\n    { type: 'Wall', info: [[25, 5], [25, 25], 1, '150,150,150'] },\n    { type: 'Wall', info: [[5, 25], [25, 25], 0.5, '255,157,0'] },\n    { type: 'Wall', info: [[15, 7], [17, 7], 1, '255,0,255'] },\n    { type: 'Wall', info: [[15, 7], [15, 10], 1, '255,155,255'] },\n    { type: 'Wall', info: [[15, 10], [15.5, 10], 1, '255,155,200'] },\n    { type: 'Wall', info: [[17, 7], [17, 10], 1, '255,155,255'] },\n    { type: 'Wall', info: [[16.5, 7], [16.5, 10], 1, '255,155,255'] },\n    { type: 'Wall', info: [[16.5, 10], [17, 10], 1, '255,155,200'] },\n    { type: 'Wall', info: [[19, 12], [22, 12], 0.1, '0,255,100'] },\n    { type: 'Wall', info: [[19, 15], [22, 15], 0.1, '0,255,100'] },\n    { type: 'Wall', info: [[22, 12], [22, 15], 1, '255,157,0'] },\n    { type: 'Wall', info: [[19, 12], [19, 15], 1, '255,157,0'] },\n    { type: 'Circle', info: [{ x: 10, y: 17.5 }, 1, '255,0,0'] },\n    { type: 'Circle', info: [{ x: 20, y: 10 }, 3, '255,0,0'] },\n];\nconst sceneBuilder = new _utils_SceneBuilder_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"](_Initializer_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nsceneBuilder.build(testScene);\nconst commands = {\n    'o': () => { console.log(_Initializer_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]); },\n    'c': () => { console.log(_utils_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera); },\n    'p': () => {\n        _Initializer_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pauseExecution();\n        console.log('execution paused');\n    },\n    'r': () => {\n        _Initializer_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pause = false;\n        _Initializer_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].execute();\n        console.log('execution resumed');\n    }\n};\nwindow.addEventListener('keydown', (e) => {\n    if (commands[e.key])\n        commands[e.key]();\n});\n_Initializer_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].execute();\n//# sourceMappingURL=Mirroware.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/Mirroware.js?")},"./lib/frontend/Services/2DRendering/SceneRenderer2D.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Service.js */ "./lib/frontend/Services/Service.js");\n/* harmony import */ var _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/Camera.js */ "./lib/frontend/utils/Camera.js");\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === "m") throw new TypeError("Private method is not writable");\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");\n    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");\n    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _SceneRenderer2D_context;\n\n\nclass SceneRenderer2D extends _Service_js__WEBPACK_IMPORTED_MODULE_0__["default"] {\n    constructor(canvas) {\n        super();\n        _SceneRenderer2D_context.set(this, void 0);\n        __classPrivateFieldSet(this, _SceneRenderer2D_context, canvas.getContext(\'2d\'), "f");\n        this.scale = 100;\n    }\n    execute() {\n        const horizontalWalls = this.world.getCollection(\'HorizontalWalls\');\n        const verticalWalls = this.world.getCollection(\'VerticalWalls\');\n        const circles = this.world.getCollection(\'Circles\');\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").fillStyle = \'rgba(0,0,0,1)\';\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").fillRect(0, 0, 3000, 3000);\n        this.renderRay(_utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.rays[Math.floor(_utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.rays.length / 2)], _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.pos);\n        horizontalWalls.forEach(wall => {\n            this.renderWall(wall);\n        });\n        verticalWalls.forEach(wall => {\n            this.renderWall(wall);\n        });\n        circles.forEach(circle => {\n            this.renderCircle(circle);\n        });\n    }\n    ;\n    renderWall(wall) {\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").strokeStyle = `rgba(${wall.color},1)`;\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").lineWidth = 15;\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").beginPath();\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").moveTo((wall.startX || wall.posX) * this.scale, (wall.posY || wall.startY) * this.scale);\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").lineTo((wall.endX || wall.posX) * this.scale, (wall.posY || wall.endY) * this.scale);\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").closePath();\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").stroke();\n    }\n    renderRay(ray, source) {\n        if (ray.reflected.getType && ray.reflected.active) {\n            this.renderRay(ray.reflected, ray.collidesAt);\n        }\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").strokeStyle = ray.level <= 1 ? \'white\' : \'red\';\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").lineWidth = 10;\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").beginPath();\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").moveTo(source.x * this.scale, source.y * this.scale);\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").lineTo(ray.collidesAt.x * this.scale, ray.collidesAt.y * this.scale);\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").closePath();\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").stroke();\n    }\n    renderCircle(circle) {\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").strokeStyle = `rgb(${circle.color})`;\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").lineWidth = 10;\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").beginPath();\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").arc(circle.center.x * this.scale, circle.center.y * this.scale, circle.radius * this.scale, 0, 2 * Math.PI);\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").stroke();\n    }\n}\n_SceneRenderer2D_context = new WeakMap();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SceneRenderer2D);\n//# sourceMappingURL=SceneRenderer2D.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/Services/2DRendering/SceneRenderer2D.js?')},"./lib/frontend/Services/3DRendering/Dimensioner.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Service.js */ "./lib/frontend/Services/Service.js");\n/* harmony import */ var _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/Camera.js */ "./lib/frontend/utils/Camera.js");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../config.js */ "./lib/frontend/config.js");\n\n\n\nclass Dimensioner extends _Service_js__WEBPACK_IMPORTED_MODULE_0__["default"] {\n    constructor(chief) {\n        super();\n        this.chief = chief;\n        this.interpolations = 0;\n    }\n    executeAsSubordinate() {\n        const context = this.chief.context;\n        const cameraDegree = _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.rays[Math.floor((_utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.rays.length) / 2)].degree;\n        const bruteTotal = _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.rays.length;\n        const netTotal = bruteTotal * (this.interpolations + 1);\n        const canvasWidth = this.chief.canvas.width;\n        const canvasHeight = this.chief.canvas.height;\n        var index;\n        for (index = 0; index < _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.rays.length; index++)\n            _calculateDimensions(this, _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.rays[index]);\n        function _calculateDimensions(service, ray, prevDistance = 0, adjustment = undefined) {\n            if (!ray.collidesWith)\n                return;\n            let frame = service.chief.world.frame;\n            let distanceX = Math.abs(ray.collidesAt.x - (ray.source.pos ? ray.source.pos.x : ray.source.collidesAt.x));\n            let distanceY = Math.abs(ray.collidesAt.y - (ray.source.pos ? ray.source.pos.y : ray.source.collidesAt.y));\n            let distance = Math.hypot(distanceX, distanceY) + prevDistance;\n            adjustment = adjustment || Math.cos(Math.abs((Math.abs(cameraDegree - ray.degree) / 180) * Math.PI));\n            let adjustedDistance = distance * adjustment;\n            if (_config_js__WEBPACK_IMPORTED_MODULE_2__["default"].transformDimensions != null) {\n                adjustedDistance = _config_js__WEBPACK_IMPORTED_MODULE_2__["default"].transformDimensions(frame, index, adjustedDistance);\n            }\n            let leftTop = { x: ((canvasWidth * index) / bruteTotal), y: (canvasHeight / 2) - (canvasHeight) / adjustedDistance };\n            let size = { x: canvasWidth / netTotal, y: (canvasHeight * 2) / adjustedDistance };\n            let flashLightBrightness = !_config_js__WEBPACK_IMPORTED_MODULE_2__["default"].fog ? 1 : Math.pow(((index - (_utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.rays.length / 2)) / 10), 2) / _config_js__WEBPACK_IMPORTED_MODULE_2__["default"].lightLevel;\n            let sceneChunck = service.chief.world.createAgent(\'SceneChunk\', {\n                info: {\n                    leftTop: leftTop,\n                    size: size,\n                    distance: distance * Math.max(flashLightBrightness, 1),\n                    point: ray.collidesAt,\n                    item: ray.collidesWith\n                }\n            });\n            service.chief.addChunk(sceneChunck);\n            if (sceneChunck.item.opacity < 1 && ray.reflected.getType) {\n                _calculateDimensions(service, ray.reflected, distance, adjustment);\n            }\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Dimensioner);\n//# sourceMappingURL=Dimensioner.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/Services/3DRendering/Dimensioner.js?')},"./lib/frontend/Services/3DRendering/Orchestrator.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Service.js */ "./lib/frontend/Services/Service.js");\n/* harmony import */ var _Dimensioner_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Dimensioner.js */ "./lib/frontend/Services/3DRendering/Dimensioner.js");\n/* harmony import */ var _RGBA_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RGBA.js */ "./lib/frontend/Services/3DRendering/RGBA.js");\n/* harmony import */ var _Texturer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Texturer.js */ "./lib/frontend/Services/3DRendering/Texturer.js");\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === "m") throw new TypeError("Private method is not writable");\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");\n    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");\n    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _SceneRenderer3D_dimensioner, _SceneRenderer3D_rgba, _SceneRenderer3D_texturer, _SceneRenderer3D_renderStack;\n\n\n\n\nclass SceneRenderer3D extends _Service_js__WEBPACK_IMPORTED_MODULE_0__["default"] {\n    constructor(canvas) {\n        super();\n        _SceneRenderer3D_dimensioner.set(this, void 0);\n        _SceneRenderer3D_rgba.set(this, void 0);\n        _SceneRenderer3D_texturer.set(this, void 0);\n        _SceneRenderer3D_renderStack.set(this, void 0);\n        this.canvas = canvas;\n        this.context = canvas.getContext(\'2d\');\n        __classPrivateFieldSet(this, _SceneRenderer3D_dimensioner, new _Dimensioner_js__WEBPACK_IMPORTED_MODULE_1__["default"](this), "f");\n        __classPrivateFieldSet(this, _SceneRenderer3D_rgba, new _RGBA_js__WEBPACK_IMPORTED_MODULE_2__["default"](this), "f");\n        __classPrivateFieldSet(this, _SceneRenderer3D_texturer, new _Texturer_js__WEBPACK_IMPORTED_MODULE_3__["default"](this), "f");\n        __classPrivateFieldSet(this, _SceneRenderer3D_renderStack, [], "f");\n    }\n    addChunk(chunk) {\n        __classPrivateFieldGet(this, _SceneRenderer3D_renderStack, "f").push(chunk);\n    }\n    popStack() {\n        const chunk = __classPrivateFieldGet(this, _SceneRenderer3D_renderStack, "f").pop();\n        if (chunk)\n            this.world.removeAgent(chunk);\n    }\n    getStack() {\n        return __classPrivateFieldGet(this, _SceneRenderer3D_renderStack, "f");\n    }\n    purgeStack() {\n        while (__classPrivateFieldGet(this, _SceneRenderer3D_renderStack, "f").length) {\n            this.popStack();\n        }\n    }\n    execute() {\n        try {\n            this.context.fillStyle = \'rgb(0,0,0)\';\n            this.context.clearRect(0, 0, this.canvas.width, this.canvas.height / 2);\n            this.context.fillRect(0, this.canvas.height / 2, this.canvas.width, this.canvas.height);\n            const grd = this.context.createRadialGradient(this.canvas.width / 4, this.canvas.height / 4, 10, 100, 60, 100);\n            grd.addColorStop(0, "rgba(0,200,0,1)");\n            grd.addColorStop(1, "rgba(0,0,0,0)");\n            this.context.fillStyle = grd;\n            this.context.fillRect(0, this.canvas.height / 2, this.canvas.width, this.canvas.height);\n            __classPrivateFieldGet(this, _SceneRenderer3D_dimensioner, "f").executeAsSubordinate();\n            __classPrivateFieldGet(this, _SceneRenderer3D_rgba, "f").executeAsSubordinate();\n            __classPrivateFieldGet(this, _SceneRenderer3D_texturer, "f").executeAsSubordinate();\n            this.purgeStack();\n        }\n        catch (err) {\n            console.error(err);\n            this.world.pauseExecution();\n        }\n    }\n}\n_SceneRenderer3D_dimensioner = new WeakMap(), _SceneRenderer3D_rgba = new WeakMap(), _SceneRenderer3D_texturer = new WeakMap(), _SceneRenderer3D_renderStack = new WeakMap();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SceneRenderer3D);\n//# sourceMappingURL=Orchestrator.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/Services/3DRendering/Orchestrator.js?')},"./lib/frontend/Services/3DRendering/RGBA.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Service.js */ "./lib/frontend/Services/Service.js");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config.js */ "./lib/frontend/config.js");\n\n\nclass RGBA extends _Service_js__WEBPACK_IMPORTED_MODULE_0__["default"] {\n    constructor(chief) {\n        super();\n        this.chief = chief;\n    }\n    executeAsSubordinate() {\n        const renderStack = this.chief.getStack();\n        for (let i = renderStack.length - 1; i >= 0; i--) {\n            let sceneChunk = renderStack[i];\n            this.renderRectangle(sceneChunk);\n        }\n    }\n    renderRectangle(sceneChunk) {\n        let context = this.chief.context;\n        let canvasWidth = this.chief.canvas.width;\n        context.fillStyle = `rgba(${_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].fogColor || "0,0,0"},${sceneChunk.item.opacity})`;\n        context.fillRect(sceneChunk.leftTop.x, sceneChunk.leftTop.y, sceneChunk.size.x, sceneChunk.size.y);\n        if (!sceneChunk.item.color)\n            return;\n        let distance = sceneChunk.distance <= 0 ? 0.01 : sceneChunk.distance;\n        context.fillStyle = `rgba(${sceneChunk.item.color}, ${sceneChunk.item.opacity / (((distance) * 5) / 15)}`;\n        context.fillRect(sceneChunk.leftTop.x, sceneChunk.leftTop.y, sceneChunk.size.x * Math.max(_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].blurEffect * 4, 1), sceneChunk.size.y);\n    }\n    renderHorizontalBorders(sceneChunk) {\n        let context = this.chief.context;\n        context.strokeStyle = `red`;\n        context.lineWidth = Math.min(30 / sceneChunk.distance, 5);\n        context.beginPath();\n        context.moveTo(sceneChunk.leftTop.x, sceneChunk.leftTop.y);\n        context.lineTo(sceneChunk.leftTop.x + sceneChunk.size.x, sceneChunk.leftTop.y);\n        context.closePath();\n        context.stroke();\n        context.beginPath();\n        context.moveTo(sceneChunk.leftTop.x, (sceneChunk.leftTop.y + sceneChunk.size.y));\n        context.lineTo(sceneChunk.leftTop.x + sceneChunk.size.x, (sceneChunk.leftTop.y + sceneChunk.size.y));\n        context.closePath();\n        context.stroke();\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RGBA);\n//# sourceMappingURL=RGBA.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/Services/3DRendering/RGBA.js?')},"./lib/frontend/Services/3DRendering/Texturer.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Service.js */ "./lib/frontend/Services/Service.js");\n/* harmony import */ var _utils_Textures_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/Textures.js */ "./lib/frontend/utils/Textures.js");\n/* harmony import */ var _utils_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/Vector2D.js */ "./lib/frontend/utils/Vector2D.js");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../config.js */ "./lib/frontend/config.js");\n\n\n\n\nclass TextureDisplayer extends _Service_js__WEBPACK_IMPORTED_MODULE_0__["default"] {\n    constructor(chief) {\n        super();\n        this.chief = chief;\n    }\n    ;\n    executeAsSubordinate() {\n        const textureSpan = 2;\n        let height = 1000;\n        let roll = [\'bricks\', \'netherrack\', \'dirt\'];\n        const renderStack = this.chief.getStack();\n        for (let i = renderStack.length - 1; i >= 0; i--) {\n            let sceneChunk = renderStack[i];\n            let scale = sceneChunk.size.y / 1000;\n            let pixelNum;\n            if (sceneChunk.item.radius)\n                pixelNum = this.mapCylinder(sceneChunk);\n            else\n                pixelNum = this.mapTexture(sceneChunk);\n            let percentage = pixelNum / textureSpan % 1;\n            let texture = _utils_Textures_js__WEBPACK_IMPORTED_MODULE_1__["default"].getTexture(roll[Math.floor(pixelNum / textureSpan) % 1]);\n            let context = this.chief.context;\n            let canvasHeight = this.chief.canvas.height;\n            context.globalAlpha = Math.min(sceneChunk.item.opacity / (sceneChunk.distance / 10) / 5, 0.5);\n            context.scale(1, scale);\n            context.drawImage(texture, (percentage * 390) % 390, 0, 10, 400, sceneChunk.leftTop.x, ((canvasHeight / 2) / scale) - (height / 2), 3000 / (_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].resolution / Math.max(_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].blurEffect * 3, 1)), height);\n            context.scale(1, 1 / scale);\n            this.chief.context.globalAlpha = 1;\n        }\n    }\n    mapCylinder(info) {\n        let _angle = Math.ceil(this.chief.world.frame / 1) / 100;\n        const direction = new _utils_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__["default"](Math.cos(_angle), Math.sin(_angle));\n        const centerToPoint = _utils_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__["default"].sub(info.point, info.item.center);\n        const angle = _utils_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__["default"].angleBetween(centerToPoint, direction);\n        return angle / 18 * (info.item.radius / 3);\n    }\n    mapTexture(info) {\n        let percentage = 0;\n        if (info.item.getType() === \'HorizontalWall\') {\n            let wallLength = info.item.endX - info.item.startX;\n            percentage = Math.abs(((info.point.x - info.item.startX)));\n        }\n        else if (info.item.getType() === \'VerticalWall\') {\n            let wallLength = info.item.endY - info.item.startY;\n            percentage = Math.abs((info.point.y - info.item.startY));\n        }\n        return percentage;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TextureDisplayer);\n//# sourceMappingURL=Texturer.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/Services/3DRendering/Texturer.js?')},"./lib/frontend/Services/Camera/CameraMover.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Service.js */ "./lib/frontend/Services/Service.js");\n/* harmony import */ var _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/Camera.js */ "./lib/frontend/utils/Camera.js");\n/* harmony import */ var _utils_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/Vector2D.js */ "./lib/frontend/utils/Vector2D.js");\n\n\n\nclass CameraMover extends _Service_js__WEBPACK_IMPORTED_MODULE_0__["default"] {\n    constructor() {\n        super();\n        this.keyPressCount = 0;\n        this.speed = 0.31;\n        this.dt = 0;\n        this.command_KeyMap = {\n            w: () => { this.translateCamera(0, 1); },\n            s: () => { this.translateCamera(0, -1); },\n            a: () => { this.translateCamera(1, 0); },\n            d: () => { this.translateCamera(-1, 0); },\n            k: () => { this.rotateCamera(-3 * this.dt); },\n            ñ: () => { this.rotateCamera(3 * this.dt); },\n        };\n        this.control = {\n            w: false,\n            s: false,\n            d: false,\n            a: false,\n            k: false,\n            ñ: false\n        };\n    }\n    execute() {\n        this.dt = 50 / this.world.fps;\n        this.speed = 0.31 * this.dt;\n        let keys = Object.keys(this.control);\n        keys.forEach((key) => {\n            if (this.control[key] === true) {\n                this.command_KeyMap[key]();\n            }\n        });\n    }\n    rotateCamera(angle = 0) {\n        _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.rays.forEach(ray => {\n            ray.degree = (ray.degree + angle) % 360;\n            if (ray.degree < 0)\n                ray.degree += 360;\n        });\n    }\n    ;\n    translateCamera(x = 0, y = 0) {\n        let midRay = _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.rays[Math.floor(_utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.rays.length / 2)];\n        let sense = (midRay.degree > 270 || midRay.degree < 90) ? 1 : -1;\n        let direction = y ? midRay.slope : -1 * Math.pow(midRay.slope, -1);\n        let normalize = _utils_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__["default"].normalize(new _utils_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__["default"](1, direction));\n        let addX = (normalize.x * sense * (x | y) * this.speed);\n        let addY = (normalize.y * sense * (x | y) * this.speed);\n        if (Math.abs(addX) >= 0)\n            _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.pos.x += addX;\n        if (Math.abs(addY) >= 0)\n            _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.pos.y += addY;\n    }\n    onkeydown(info) {\n        if (this.control[info.key] !== undefined && this.control[info.key] !== true) {\n            this.control[info.key] = true;\n        }\n    }\n    onkeyup(info) {\n        if (this.control[info.key] !== undefined && this.control[info.key] !== false) {\n            this.control[info.key] = false;\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CameraMover);\n//# sourceMappingURL=CameraMover.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/Services/Camera/CameraMover.js?')},"./lib/frontend/Services/Camera/InputHandler.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Service.js */ \"./lib/frontend/Services/Service.js\");\n\nclass InputHandler extends _Service_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor() {\n        super();\n    }\n    init() {\n        window.addEventListener('keydown', (e) => { this.keydown(e); });\n        window.addEventListener('keyup', (e) => { this.keyup(e); });\n        this.world.registerEvent('keydown');\n        this.world.registerEvent('keyup');\n        this.world.registerServiceToEvent('CameraMover', 'keydown');\n        this.world.registerServiceToEvent('CameraMover', 'keyup');\n        return true;\n    }\n    keydown(e) {\n        if (!this.world.pause)\n            this.world.notifyEvent('keydown', { key: e.key });\n    }\n    keyup(e) {\n        if (!this.world.pause)\n            this.world.notifyEvent('keyup', { key: e.key });\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (InputHandler);\n//# sourceMappingURL=InputHandler.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/Services/Camera/InputHandler.js?")},"./lib/frontend/Services/RayCast/Orchestrator.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Service.js */ "./lib/frontend/Services/Service.js");\n/* harmony import */ var _RayCalculator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RayCalculator.js */ "./lib/frontend/Services/RayCast/RayCalculator.js");\n/* harmony import */ var _RayCastProcessor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RayCastProcessor.js */ "./lib/frontend/Services/RayCast/RayCastProcessor.js");\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === "m") throw new TypeError("Private method is not writable");\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");\n    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");\n    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _RayCaster_variableCalculator, _RayCaster_rayCastProcessor;\n\n\n\nclass RayCaster extends _Service_js__WEBPACK_IMPORTED_MODULE_0__["default"] {\n    constructor() {\n        super();\n        _RayCaster_variableCalculator.set(this, void 0);\n        _RayCaster_rayCastProcessor.set(this, void 0);\n        __classPrivateFieldSet(this, _RayCaster_variableCalculator, new _RayCalculator_js__WEBPACK_IMPORTED_MODULE_1__["default"](this), "f");\n        __classPrivateFieldSet(this, _RayCaster_rayCastProcessor, new _RayCastProcessor_js__WEBPACK_IMPORTED_MODULE_2__["default"](this), "f");\n    }\n    execute() {\n        try {\n            __classPrivateFieldGet(this, _RayCaster_variableCalculator, "f").execute();\n            __classPrivateFieldGet(this, _RayCaster_rayCastProcessor, "f").execute();\n            return true;\n        }\n        catch (err) {\n            this.world.pauseExecution();\n            console.error(err);\n            return false;\n        }\n    }\n    calculateRayProperties(source, ray) {\n        return __classPrivateFieldGet(this, _RayCaster_variableCalculator, "f").calculateRayProperties(source, ray);\n    }\n}\n_RayCaster_variableCalculator = new WeakMap(), _RayCaster_rayCastProcessor = new WeakMap();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RayCaster);\n//# sourceMappingURL=Orchestrator.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/Services/RayCast/Orchestrator.js?')},"./lib/frontend/Services/RayCast/RayCalculator.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Service.js */ "./lib/frontend/Services/Service.js");\n/* harmony import */ var _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/Camera.js */ "./lib/frontend/utils/Camera.js");\n\n\nclass RayCalculator extends _Service_js__WEBPACK_IMPORTED_MODULE_0__["default"] {\n    constructor(chief) {\n        super();\n        this.chief = chief;\n    }\n    execute() {\n        let rays = _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.rays;\n        rays.forEach((ray) => {\n            this.calculateRayProperties(_utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.pos, ray);\n        });\n        this.getIndicesOfClosest(_utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera);\n        return true;\n    }\n    ;\n    getIndicesOfClosest(source, testArgs = undefined) {\n        const verticalWalls = (testArgs && testArgs.vertical) ? testArgs.vertical : this.chief.world.getCollection(\'VerticalWalls\');\n        const horizontalWalls = (testArgs && testArgs.horizontal) ? testArgs.horizontal : this.chief.world.getCollection(\'HorizontalWalls\');\n        let xPositions = verticalWalls.map((wall) => wall.posX);\n        source.wallIndices.vertical = this.BinarySearchForClosest(xPositions, source.pos.x);\n        let yPositions = horizontalWalls.map((wall) => wall.posY);\n        source.wallIndices.horizontal = this.BinarySearchForClosest(yPositions, source.pos.y);\n        return source.wallIndices;\n    }\n    BinarySearchForClosest(arr, value) {\n        if (arr.length <= 0)\n            return -1;\n        let leftIndex = 0;\n        let rightIndex = arr.length - 1;\n        let inBetweenIndex = Math.ceil((leftIndex + rightIndex) / 2);\n        let index = inBetweenIndex;\n        let exec = 0;\n        while (leftIndex < rightIndex && exec < 100) {\n            exec++;\n            if (rightIndex == inBetweenIndex) {\n                index = rightIndex;\n                break;\n            }\n            if (arr[inBetweenIndex] < value) {\n                leftIndex = inBetweenIndex;\n            }\n            else if (arr[inBetweenIndex] > value) {\n                rightIndex = inBetweenIndex;\n                index = rightIndex;\n            }\n            else if (arr[inBetweenIndex] == value) {\n                index = inBetweenIndex;\n                break;\n            }\n            ;\n            inBetweenIndex = Math.ceil((leftIndex + rightIndex) / 2);\n        }\n        while (arr[index] >= value)\n            index--;\n        if (exec >= 100)\n            throw Error(\'Binary Search went out of control\');\n        return index;\n    }\n    calculateRaySlope(ray) {\n        let degrees = ((ray.degree / 180) * Math.PI);\n        ray.slope = Math.sin(degrees) / Math.cos(degrees);\n        return ray.slope;\n    }\n    calculateRayYIntercept(origin, ray) {\n        ray.YIntercept = origin.y - (ray.slope * origin.x);\n    }\n    calculateRayEnding(pos, ray) {\n        let degrees = ((ray.degree / 180) * Math.PI);\n        ray.collidesAt.x = pos.x + Math.cos(degrees) * 500;\n        ray.collidesAt.y = pos.y + Math.sin(degrees) * 500;\n    }\n    calculateRayProperties(source, ray) {\n        if (ray.degree < 0)\n            this.handleNegativeDegrees(ray);\n        this.calculateRaySlope(ray);\n        this.calculateRayYIntercept(source, ray);\n        this.calculateRayEnding(source, ray);\n    }\n    handleNegativeDegrees(ray) {\n        if (ray.degree < 0) {\n            ray.degree = Math.abs(ray.degree % -360) + 90;\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RayCalculator);\n//# sourceMappingURL=RayCalculator.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/Services/RayCast/RayCalculator.js?')},"./lib/frontend/Services/RayCast/RayCastProcessor.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_CollisionDetector_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/CollisionDetector.js */ "./lib/frontend/utils/CollisionDetector.js");\n/* harmony import */ var _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/Camera.js */ "./lib/frontend/utils/Camera.js");\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Service.js */ "./lib/frontend/Services/Service.js");\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === "m") throw new TypeError("Private method is not writable");\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");\n    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");\n    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _RayCastProcessor_chief;\n\n\n\nclass RayCastProcessor extends _Service_js__WEBPACK_IMPORTED_MODULE_2__["default"] {\n    constructor(chief) {\n        super();\n        _RayCastProcessor_chief.set(this, void 0);\n        __classPrivateFieldSet(this, _RayCastProcessor_chief, chief, "f");\n    }\n    execute() {\n        let rays = _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.rays;\n        let reflectedRay = __classPrivateFieldGet(this, _RayCastProcessor_chief, "f").world.createAgent(\'Ray\');\n        _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.sceneModel.purge();\n        for (let i = 0; i < _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.rays.length; i++)\n            this.castRay(_utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.pos, rays[i], _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.wallIndices);\n    }\n    castRay(pos, ray, indices) {\n        if (ray.reflected)\n            ray.reflected.active = false;\n        let newHorizontalIndex = this.testAgainstHorizontalWalls(ray, indices.horizontal);\n        let newVerticalIndex = this.testAgainstVerticalWalls(ray, indices.vertical);\n        this.testAgainstCircles(ray);\n        _utils_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.sceneModel.update(ray);\n        if (newHorizontalIndex == false && newVerticalIndex == false)\n            return false;\n        if (!((ray.collidesWith.opacity < 1) && ray.level < 5))\n            return false;\n        let newIndices = {\n            vertical: (newVerticalIndex === false) ? indices.vertical : newVerticalIndex,\n            horizontal: (newHorizontalIndex === false) ? indices.horizontal : newHorizontalIndex\n        };\n        let angleAdd = (ray.collidesWith.getType() == \'HorizontalWall\') ? 360 : 180;\n        if (!ray.reflected.getType) {\n            let reflectedRay = __classPrivateFieldGet(this, _RayCastProcessor_chief, "f").world.createAgent(\'Ray\');\n            ray.reflected.degree = (angleAdd - ray.degree);\n            reflectedRay.source = ray;\n            reflectedRay.level = ray.level + 1;\n            ray.reflected = reflectedRay;\n        }\n        ray.reflected.active = true;\n        ray.reflected.degree = (angleAdd - ray.degree);\n        ray.wallIndices = newIndices;\n        __classPrivateFieldGet(this, _RayCastProcessor_chief, "f").calculateRayProperties(ray.collidesAt, ray.reflected);\n        this.castRay(ray.collidesAt, ray.reflected, newIndices);\n    }\n    testAgainstVerticalWalls(ray, index) {\n        if (ray.degree == 90 || ray.degree == 270)\n            return false;\n        let sense = Math.cos(ray.degree * (Math.PI / 180)) > 0 ? 1 : -1;\n        const walls = __classPrivateFieldGet(this, _RayCastProcessor_chief, "f").world.getCollection(\'VerticalWalls\');\n        if (walls.length <= 0)\n            return false;\n        for (index += (sense == 1 ? 1 : 0); (index < walls.length && sense == 1) || (index >= 0 && sense == -1); index += sense) {\n            if (walls[index].posX <= ray.collidesAt.x && sense == -1)\n                return index;\n            if (walls[index].posX >= ray.collidesAt.x && sense == 1)\n                return index - 1;\n            let hasCollided = _utils_CollisionDetector_js__WEBPACK_IMPORTED_MODULE_0__["default"].RayVsVerticalLine(ray, walls[index]);\n            if (!hasCollided)\n                continue;\n            let isCloser = this.compareWithClosest(ray, hasCollided);\n            if (!isCloser)\n                return index - 1;\n            ray.collidesAt.x = hasCollided[0];\n            ray.collidesAt.y = hasCollided[1];\n            ray.collidesWith = walls[index];\n            return index - (sense == 1 ? 1 : 0);\n        }\n        return false;\n    }\n    testAgainstHorizontalWalls(ray, index) {\n        if (ray.degree == 180 || ray.degree == 0)\n            return false;\n        let sense = Math.sin(ray.degree * (Math.PI / 180)) > 0 ? 1 : -1;\n        const walls = __classPrivateFieldGet(this, _RayCastProcessor_chief, "f").world.getCollection(\'HorizontalWalls\');\n        if (walls.length <= 0)\n            return false;\n        for (index += (sense == 1 ? 1 : 0); (index < walls.length && sense == 1) || (index >= 0 && sense == -1); index += sense) {\n            let hasCollided = _utils_CollisionDetector_js__WEBPACK_IMPORTED_MODULE_0__["default"].RayVsHorizontalLine(ray, walls[index]);\n            if (!hasCollided)\n                continue;\n            let isCloser = this.compareWithClosest(ray, hasCollided);\n            if (!isCloser)\n                return false;\n            ray.collidesAt.x = hasCollided[0];\n            ray.collidesAt.y = hasCollided[1];\n            ray.collidesWith = walls[index];\n            return index - (sense == 1 ? 1 : 0);\n        }\n        return false;\n    }\n    testAgainstCircles(ray) {\n        const circles = __classPrivateFieldGet(this, _RayCastProcessor_chief, "f").world.getCollection(\'Circles\');\n        for (let i = 0; i < circles.length; i++) {\n            let hasCollided = _utils_CollisionDetector_js__WEBPACK_IMPORTED_MODULE_0__["default"].RayVsCircle(ray, circles[i]);\n            if (!hasCollided)\n                continue;\n            let isCloser = this.compareWithClosest(ray, hasCollided);\n            if (!isCloser)\n                continue;\n            ray.collidesAt.x = hasCollided[0];\n            ray.collidesAt.y = hasCollided[1];\n            ray.collidesWith = circles[i];\n        }\n    }\n    compareWithClosest(ray, collisionPoint) {\n        let rayOrigin = ray.source.pos || ray.source.collidesAt;\n        let distanceToPoint = Math.abs(rayOrigin.x - collisionPoint[0]) + Math.abs(rayOrigin.y - collisionPoint[1]);\n        let currentShortest = Math.abs(rayOrigin.x - ray.collidesAt.x) + Math.abs(rayOrigin.y - ray.collidesAt.y);\n        return distanceToPoint < currentShortest;\n    }\n}\n_RayCastProcessor_chief = new WeakMap();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RayCastProcessor);\n//# sourceMappingURL=RayCastProcessor.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/Services/RayCast/RayCastProcessor.js?')},"./lib/frontend/Services/Service.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _pluglightjs_World_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../../../pluglightjs/World.js */ "./vendor/pluglightjs/World.js");\n\nclass Service {\n    constructor() {\n        this.world = new _pluglightjs_World_js__WEBPACK_IMPORTED_MODULE_0__["default"]();\n    }\n    execute() {\n        return false;\n    }\n    init() {\n        return false;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Service);\n//# sourceMappingURL=Service.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/Services/Service.js?')},"./lib/frontend/config.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst CONFIG = {\n    resolution: 300,\n    fog: true,\n    fogColor: "10,0,0",\n    blurEffect: 0,\n    transformDimensions: (frame, index, distance) => {\n        return distance;\n    },\n    lightLevel: 10\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CONFIG);\n//# sourceMappingURL=config.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/config.js?')},"./lib/frontend/setUp/agentTypes.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _types_HorizontalWall_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types/HorizontalWall.js */ \"./lib/frontend/types/HorizontalWall.js\");\n/* harmony import */ var _types_VerticalWall_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types/VerticalWall.js */ \"./lib/frontend/types/VerticalWall.js\");\n/* harmony import */ var _types_Ray_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types/Ray.js */ \"./lib/frontend/types/Ray.js\");\n/* harmony import */ var _types_Circle_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../types/Circle.js */ \"./lib/frontend/types/Circle.js\");\n/* harmony import */ var _types_SceneChunk_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../types/SceneChunk.js */ \"./lib/frontend/types/SceneChunk.js\");\n\n\n\n\n\nconst agentTypes = {\n    'HorizontalWall': { 'info': _types_HorizontalWall_js__WEBPACK_IMPORTED_MODULE_0__.horizontalWallPrototype },\n    'VerticalWall': { 'info': _types_VerticalWall_js__WEBPACK_IMPORTED_MODULE_1__.verticalWallPrototype, },\n    'Circle': { 'info': _types_Circle_js__WEBPACK_IMPORTED_MODULE_3__.circlePrototype },\n    'Ray': { 'info': _types_Ray_js__WEBPACK_IMPORTED_MODULE_2__.rayPrototype },\n    'SceneChunk': { 'info': _types_SceneChunk_js__WEBPACK_IMPORTED_MODULE_4__.SceneChunkPrototype }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (agentTypes);\n//# sourceMappingURL=agentTypes.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/setUp/agentTypes.js?")},"./lib/frontend/setUp/canvases.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_CanvasManager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/CanvasManager.js */ \"./lib/frontend/utils/CanvasManager.js\");\n\nconst canvases = {\n    canvas3d: _utils_CanvasManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createCanvas({\n        id: 'canvas3d',\n        width: 3000,\n        height: 1700,\n        style: {\n            width: '100%',\n            zIndex: 2,\n        }\n    }),\n    background: _utils_CanvasManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createCanvas({\n        id: 'background',\n        width: 3000,\n        height: 1700,\n        style: {\n            zIndex: 1,\n            width: '100%',\n            background: 'linear-gradient(180deg, rgba(125,213,205,1) 0%, rgba(155,100,50,0.9836309523809523) 50%)'\n        }\n    }),\n    frontground: _utils_CanvasManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createCanvas({\n        id: 'frontground',\n        width: 3000,\n        height: 1700,\n        style: {\n            zIndex: 2,\n            width: '100%',\n        }\n    }),\n    canvas2d: _utils_CanvasManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createCanvas({\n        id: 'canvas2d',\n        width: 3000,\n        height: 3000,\n        style: {\n            zIndex: 3,\n            position: 'absolute',\n            border: 'double red 5px',\n            borderRadius: '15%',\n            top: '5px',\n            right: '5px',\n            width: '20%',\n            height: 'auto',\n            opacity: '0.9',\n        }\n    })\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (canvases);\n//# sourceMappingURL=canvases.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/setUp/canvases.js?")},"./lib/frontend/setUp/collections.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst collections = ['HorizontalWalls', 'VerticalWalls', 'Circles'];\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (collections);\n//# sourceMappingURL=collections.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/setUp/collections.js?")},"./lib/frontend/setUp/events.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst events = {\n    'keypressed': ['RayCastProcessor']\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (events);\n//# sourceMappingURL=events.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/setUp/events.js?")},"./lib/frontend/setUp/services.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Services_RayCast_Orchestrator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Services/RayCast/Orchestrator.js */ "./lib/frontend/Services/RayCast/Orchestrator.js");\n/* harmony import */ var _Services_3DRendering_Orchestrator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Services/3DRendering/Orchestrator.js */ "./lib/frontend/Services/3DRendering/Orchestrator.js");\n/* harmony import */ var _Services_2DRendering_SceneRenderer2D_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Services/2DRendering/SceneRenderer2D.js */ "./lib/frontend/Services/2DRendering/SceneRenderer2D.js");\n/* harmony import */ var _Services_Camera_CameraMover_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Services/Camera/CameraMover.js */ "./lib/frontend/Services/Camera/CameraMover.js");\n/* harmony import */ var _Services_Camera_InputHandler_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Services/Camera/InputHandler.js */ "./lib/frontend/Services/Camera/InputHandler.js");\n/* harmony import */ var _canvases_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./canvases.js */ "./lib/frontend/setUp/canvases.js");\n\n\n\n\n\n\nconst services = {\n    \'RayCastProcessor\': new _Services_RayCast_Orchestrator_js__WEBPACK_IMPORTED_MODULE_0__["default"](),\n    \'SceneRenderer3D\': new _Services_3DRendering_Orchestrator_js__WEBPACK_IMPORTED_MODULE_1__["default"](_canvases_js__WEBPACK_IMPORTED_MODULE_5__["default"].canvas3d),\n    \'SceneRenderer2D\': new _Services_2DRendering_SceneRenderer2D_js__WEBPACK_IMPORTED_MODULE_2__["default"](_canvases_js__WEBPACK_IMPORTED_MODULE_5__["default"].canvas2d),\n    \'CameraMover\': new _Services_Camera_CameraMover_js__WEBPACK_IMPORTED_MODULE_3__["default"](),\n    \'InputHandler\': new _Services_Camera_InputHandler_js__WEBPACK_IMPORTED_MODULE_4__["default"]()\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (services);\n//# sourceMappingURL=services.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/setUp/services.js?')},"./lib/frontend/setUp/setUp.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appSetUp: () => (/* binding */ appSetUp)\n/* harmony export */ });\n/* harmony import */ var _agentTypes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./agentTypes.js */ "./lib/frontend/setUp/agentTypes.js");\n/* harmony import */ var _collections_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collections.js */ "./lib/frontend/setUp/collections.js");\n/* harmony import */ var _services_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./services.js */ "./lib/frontend/setUp/services.js");\n/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./events.js */ "./lib/frontend/setUp/events.js");\n\n\n\n\n;\nconst appSetUp = {\n    "agentTypes": _agentTypes_js__WEBPACK_IMPORTED_MODULE_0__["default"],\n    "collections": _collections_js__WEBPACK_IMPORTED_MODULE_1__["default"],\n    "services": _services_js__WEBPACK_IMPORTED_MODULE_2__["default"],\n    "events": _events_js__WEBPACK_IMPORTED_MODULE_3__["default"]\n};\n\n//# sourceMappingURL=setUp.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/setUp/setUp.js?')},"./lib/frontend/types/Circle.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   circlePrototype: () => (/* binding */ circlePrototype)\n/* harmony export */ });\n/* harmony import */ var _utils_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/Vector2D.js */ "./lib/frontend/utils/Vector2D.js");\n\n;\nconst circlePrototype = {\n    center: new _utils_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](0, 0),\n    radius: 1,\n    color: \'255,0,0\',\n    opacity: 1\n};\n\n//# sourceMappingURL=Circle.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/types/Circle.js?')},"./lib/frontend/types/HorizontalWall.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   horizontalWallPrototype: () => (/* binding */ horizontalWallPrototype)\n/* harmony export */ });\nconst horizontalWallPrototype = {\n    color: 'white',\n    startX: NaN,\n    endX: NaN,\n    posY: NaN,\n    opacity: 1\n};\n\n//# sourceMappingURL=HorizontalWall.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/types/HorizontalWall.js?")},"./lib/frontend/types/Ray.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   rayPrototype: () => (/* binding */ rayPrototype)\n/* harmony export */ });\n/* harmony import */ var _utils_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/Vector2D.js */ "./lib/frontend/utils/Vector2D.js");\n\nconst rayPrototype = {\n    active: true,\n    source: {},\n    reflected: {},\n    level: 1,\n    degree: NaN,\n    slope: NaN,\n    YIntercept: NaN,\n    collidesWith: undefined,\n    collidesAt: (new _utils_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](NaN, NaN)),\n    wallIndices: { horizontal: NaN, vertical: NaN }\n};\n\n//# sourceMappingURL=Ray.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/types/Ray.js?')},"./lib/frontend/types/SceneChunk.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SceneChunkPrototype: () => (/* binding */ SceneChunkPrototype)\n/* harmony export */ });\n/* harmony import */ var _utils_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/Vector2D.js */ "./lib/frontend/utils/Vector2D.js");\n\nconst SceneChunkPrototype = {\n    leftTop: { x: NaN, y: NaN },\n    size: { x: NaN, y: NaN },\n    distance: NaN,\n    point: new _utils_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](NaN, NaN),\n    item: null\n};\n\n//# sourceMappingURL=SceneChunk.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/types/SceneChunk.js?')},"./lib/frontend/types/VerticalWall.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   verticalWallPrototype: () => (/* binding */ verticalWallPrototype)\n/* harmony export */ });\nconst verticalWallPrototype = {\n    color: 'white',\n    startY: NaN,\n    endY: NaN,\n    posX: NaN,\n    opacity: 1\n};\n\n//# sourceMappingURL=VerticalWall.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/types/VerticalWall.js?")},"./lib/frontend/utils/Camera.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Camera: () => (/* binding */ Camera),\n/* harmony export */   camera: () => (/* binding */ camera)\n/* harmony export */ });\n/* harmony import */ var _SceneModel_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SceneModel.js */ "./lib/frontend/utils/SceneModel.js");\n/* harmony import */ var _Vector2D_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Vector2D.js */ "./lib/frontend/utils/Vector2D.js");\n\n\nclass Camera {\n    constructor(pos) {\n        this.wallIndices = { horizontal: 0, vertical: 0 };\n        this.pos = new _Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"](pos.x || 0, pos.y || 0);\n        this.sceneModel = new _SceneModel_js__WEBPACK_IMPORTED_MODULE_0__["default"]();\n        this.rays = [];\n    }\n}\nconst camera = new Camera({ x: 13, y: 13 });\n\n//# sourceMappingURL=Camera.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/utils/Camera.js?')},"./lib/frontend/utils/CanvasManager.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   canvas2d: () => (/* binding */ canvas2d),\n/* harmony export */   canvas3d: () => (/* binding */ canvas3d),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst canvas2d = document.querySelector('#canvas2d');\nconst canvas3d = document.querySelector('#canvas3d');\nclass CanvasManager {\n    constructor() {\n        this.canvases = new Map();\n    }\n    createCanvas(details) {\n        const canvasContainer = document.querySelector('.canvasContainer');\n        const canvas = document.createElement('canvas');\n        if (document.getElementById(details.id) !== null || this.canvases.get(details.id) !== undefined) {\n            console.warn(`Violation: unexpectedly, an element already exists having the id '${details.id}' the canvas is supposed to adquire`);\n        }\n        canvas.id = details.id;\n        canvas.width = details.width;\n        canvas.height = details.height;\n        canvas.style.position = 'absolute';\n        if (details.style === null)\n            return canvas;\n        for (let property in details.style) {\n            canvas.style[property] = details.style[property];\n        }\n        if (canvasContainer === null) {\n            document.body.appendChild(canvas);\n            console.warn(\"You must define a <div> container with the id 'canvasContainer'; the canvas will be allocated at the root element '<body>' because the container was not defined \");\n        }\n        else\n            canvasContainer.appendChild(canvas);\n        this.canvases.set(canvas.id, canvas);\n        return canvas;\n    }\n    deleteCanvas(canvas) {\n        const canvasID = canvas.id;\n        this.canvases.delete(canvasID);\n        const canvasContainer = document.querySelector('.canvasContainer');\n        if (canvasContainer === null)\n            return;\n        canvasContainer.removeChild(canvas);\n    }\n    getCanvas(canvasID) {\n        const canvas = this.canvases.get(canvasID);\n        return canvas !== undefined ? canvas : false;\n    }\n}\nconst instance = new CanvasManager();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (instance);\n//# sourceMappingURL=CanvasManager.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/utils/CanvasManager.js?")},"./lib/frontend/utils/CollisionDetector.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector2D.js */ \"./lib/frontend/utils/Vector2D.js\");\n\nclass CollisionDetector {\n    static RayVsVerticalLine(ray, line) {\n        if (typeof ray != 'object' || typeof line != 'object') {\n            console.error(\"Both 'ray' and 'line' parameters must be objects\");\n            return false;\n        }\n        if (typeof ray.YIntercept != 'number' || typeof ray.slope != 'number') {\n            console.error(\"Invalid argument passed as 'ray'\");\n            return false;\n        }\n        if (typeof line.startY != 'number' || typeof line.endY != 'number' || typeof line.posX != 'number' || line.startY >= line.endY) {\n            console.error(\"Invalid argument passed as 'line'\");\n            return false;\n        }\n        if (Math.abs(ray.slope) == 0) {\n            let theyCollide = (line.startY < ray.YIntercept && ray.YIntercept < line.endY);\n            return theyCollide ? [line.posX, ray.YIntercept] : false;\n        }\n        var colinearYValue = (ray.slope * line.posX) + ray.YIntercept;\n        if (line.startY <= colinearYValue && colinearYValue <= line.endY) {\n            return [line.posX, colinearYValue];\n        }\n        return false;\n    }\n    static RayVsHorizontalLine(ray, line) {\n        if (typeof ray != 'object' || typeof line != 'object') {\n            console.error(\"Both 'ray' and 'line' parameters must be objects\");\n            return false;\n        }\n        if (typeof ray.YIntercept != 'number' || typeof ray.slope != 'number') {\n            console.error(\"Invalid argument passed as 'ray'\");\n            return false;\n        }\n        if (typeof line.startX != 'number' || typeof line.endX != 'number' || typeof line.posY != 'number') {\n            console.error(\"Invalid argument passed as 'line'\");\n            return false;\n        }\n        var colinearXValue = (line.posY - ray.YIntercept) / ray.slope;\n        if (Math.abs(ray.slope) == 0)\n            return false;\n        if (line.startX <= colinearXValue && colinearXValue <= line.endX) {\n            return [colinearXValue, line.posY];\n        }\n        return false;\n    }\n    static RayVsCircle(ray, circle) {\n        if (circle.radius <= 0) {\n            console.error(\"Circle was defined with a negative or zero radius\");\n            return false;\n        }\n        if (typeof ray.YIntercept != 'number' || typeof ray.slope != 'number') {\n            console.error(\"Invalid argument passed as 'ray'\");\n            return false;\n        }\n        let rayOrigin = ray.source.pos ? ray.source.pos : ray.source.collidesAt;\n        let OC = _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sub(circle.center, rayOrigin);\n        let rayDirection = new _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"](Math.cos(ray.degree * (Math.PI / 180)), Math.sin(ray.degree * (Math.PI / 180)));\n        let OAmag = _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dot(rayDirection, OC);\n        let CAmagSq = OC.magSq() - OAmag * OAmag;\n        let BAmag = Math.sqrt(circle.radius * circle.radius - CAmagSq);\n        let distance = OAmag - BAmag;\n        if (distance <= 0)\n            return false;\n        let RayToCircle = rayDirection.scale(distance);\n        let intercept = [rayOrigin.x + RayToCircle.x, rayOrigin.y + RayToCircle.y];\n        return intercept;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CollisionDetector);\n//# sourceMappingURL=CollisionDetector.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/utils/CollisionDetector.js?")},"./lib/frontend/utils/SceneBuilder.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass SceneBuilder {\n    constructor(app) {\n        this.app = app;\n    }\n    build(scene) {\n        var horizontal = [];\n        var vertical = [];\n        var circles = [];\n        scene.forEach((element) => {\n            if (element.type == \"Wall\") {\n                let segment = element.info;\n                let vertexA = segment[0];\n                let vertexB = segment[1];\n                if (vertexA[0] == vertexB[0] && vertexA[1] != vertexB[1]) {\n                    vertical.push(this.buildVerticalWall(vertexA, vertexB, segment[2], segment[3]));\n                }\n                else if (vertexA[1] == vertexB[1] && vertexA[0] != vertexB[0]) {\n                    horizontal.push(this.buildHorizontalWall(vertexA, vertexB, segment[2], segment[3]));\n                }\n                else {\n                    console.warn(`Invalid vertex pair given: the vertices must be different and colinear`);\n                }\n            }\n            else if (element.type == 'Circle') {\n                let info = element.info;\n                circles.push(this.buildCircle(info[0], info[1], info[2]));\n            }\n        });\n        horizontal.sort((a, b) => { return a.posY - b.posY; });\n        vertical.sort((a, b) => { return a.posX - b.posX; });\n        horizontal.forEach(wall => { this.app.addToCollection('HorizontalWalls', wall); });\n        vertical.forEach(wall => { this.app.addToCollection('VerticalWalls', wall); });\n        circles.forEach(circle => { this.app.addToCollection('Circles', circle); });\n    }\n    buildHorizontalWall(vertexA, vertexB, opacity, color) {\n        let wall = this.app.createAgent('HorizontalWall', {\n            info: {\n                startX: Math.min(vertexA[0], vertexB[0]),\n                endX: Math.max(vertexA[0], vertexB[0]),\n                posY: vertexA[1],\n                opacity: opacity || 1,\n                color: color || 'white'\n            }\n        });\n        return wall;\n    }\n    ;\n    buildVerticalWall(vertexA, vertexB, opacity, color) {\n        let wall = this.app.createAgent('VerticalWall', {\n            info: {\n                startY: Math.min(vertexA[1], vertexB[1]),\n                endY: Math.max(vertexA[1], vertexB[1]),\n                posX: vertexA[0],\n                opacity: opacity || 1,\n                color: color || 'white'\n            }\n        });\n        return wall;\n    }\n    ;\n    buildCircle(center, radius, color) {\n        console.log(color);\n        let circle = this.app.createAgent('Circle', {\n            info: {\n                radius: radius,\n                center: center,\n                color: color\n            }\n        });\n        return circle;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SceneBuilder);\n//# sourceMappingURL=SceneBuilder.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/utils/SceneBuilder.js?")},"./lib/frontend/utils/SceneModel.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass SceneModel {\n    constructor() {\n        this.layers = [];\n        this.prevIndices = Array(5).fill(-1);\n        this.lastIDs = Array(5).fill(NaN);\n        for (let i = 0; i < 5; i++)\n            this.layers.push([]);\n    }\n    update(ray) {\n        let item = ray.collidesWith || undefined;\n        let layer = ray.level - 1;\n        try {\n            if (!item)\n                return false;\n            let sameAsLast = this.lastIDs[layer] >= 0 && item.getID() === this.lastIDs[layer];\n            if (sameAsLast) {\n                let chunk = this.layers[layer][this.prevIndices[layer]];\n                chunk.to = ray;\n                chunk.old = true;\n            }\n            else {\n                let index = ++this.prevIndices[layer];\n                let oldChunk = this.layers[layer][index] || undefined;\n                if (oldChunk) {\n                    oldChunk.item = item,\n                        oldChunk.from = ray;\n                    oldChunk.to = ray;\n                    oldChunk.old = true;\n                }\n                else {\n                    this.layers[layer].push({\n                        item: item,\n                        from: ray,\n                        to: ray,\n                        old: true\n                    });\n                }\n            }\n            this.lastIDs[ray.level - 1] = item.getID();\n        }\n        catch (err) {\n            console.log(ray);\n            console.error(err);\n            throw Error('error at scene model');\n        }\n    }\n    purge() {\n        for (let i = 0; i < this.layers.length; i++) {\n            let layer = this.layers[i];\n            for (let j = 0; j < layer.length;) {\n                this.layers[i].shift();\n            }\n            this.prevIndices[i] = -1;\n            this.lastIDs[i] = NaN;\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SceneModel);\n//# sourceMappingURL=SceneModel.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/utils/SceneModel.js?")},"./lib/frontend/utils/Textures.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");\n    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Textures_textures;\nclass Textures {\n    constructor() {\n        _Textures_textures.set(this, {});\n    }\n    addTexture(textureName, src) {\n        if (typeof textureName !== \'string\' || !textureName) {\n            console.error(`Invalid texture name given, it must be a non-empty string`);\n        }\n        if (__classPrivateFieldGet(this, _Textures_textures, "f")[textureName]) {\n            console.error(`Cannot add texture with name \'${textureName}\'; the name has already been registered`);\n        }\n        let image;\n        try {\n            image = new Image();\n            image.src = \'./img/textures/\' + src;\n        }\n        catch (err) {\n            console.error(`The image with source \'/img/textures/${src}\' could not be found`);\n        }\n        __classPrivateFieldGet(this, _Textures_textures, "f")[textureName] = image;\n        return true;\n    }\n    removeTexture(textureName) {\n        if (!__classPrivateFieldGet(this, _Textures_textures, "f")[textureName]) {\n            return false;\n        }\n        delete __classPrivateFieldGet(this, _Textures_textures, "f")[textureName];\n        return true;\n    }\n    getTexture(textureName) {\n        if (!__classPrivateFieldGet(this, _Textures_textures, "f")[textureName]) {\n            return false;\n        }\n        return __classPrivateFieldGet(this, _Textures_textures, "f")[textureName];\n    }\n}\n_Textures_textures = new WeakMap();\nconst textures = new Textures();\ntextures.addTexture(\'netherrack\', \'hororr.png\');\ntextures.addTexture(\'dirt\', \'prop.png\');\ntextures.addTexture(\'bricks\', \'bricks.png\');\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (textures);\n//# sourceMappingURL=Textures.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/utils/Textures.js?')},"./lib/frontend/utils/Vector2D.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass Vector2D {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    }\n    add(v) {\n        this.x += v.x;\n        this.y += v.y;\n        return this;\n    }\n    static add(v1, v2) {\n        return new Vector2D(v1.x + v2.x, v1.y + v2.y);\n    }\n    sub(v) {\n        this.x -= v.x;\n        this.y -= v.y;\n        return this;\n    }\n    static sub(v1, v2) {\n        return new Vector2D(v1.x - v2.x, v1.y - v2.y);\n    }\n    div(v) {\n        this.x /= v.x;\n        this.y /= v.y;\n        return this;\n    }\n    static div(v1, v2) {\n        return new Vector2D(v1.x / v2.x, v1.y / v2.y);\n    }\n    mult(v) {\n        this.x *= v.x;\n        this.y *= v.y;\n        return this;\n    }\n    static mult(v1, v2) {\n        return new Vector2D(v1.x * v2.x, v1.y * v2.y);\n    }\n    dot(v) {\n        return (this.x * v.x) + (this.y * v.y);\n    }\n    static dot(v1, v2) {\n        return (v1.x * v2.x) + (v1.y * v2.y);\n    }\n    magSq() {\n        return (this.x * this.x) + (this.y * this.y);\n    }\n    static magSq(v) {\n        return (v.x * v.x) + (v.y * v.y);\n    }\n    mag() {\n        return Math.sqrt(this.magSq());\n    }\n    static mag(v) {\n        return Math.sqrt(Vector2D.magSq(v));\n    }\n    scale(s) {\n        this.x *= s;\n        this.y *= s;\n        return this;\n    }\n    static scale(v, s) {\n        return { x: v.x * s, y: v.y * s };\n    }\n    normalize() {\n        let mag = this.mag();\n        this.x /= mag;\n        this.y /= mag;\n        return this;\n    }\n    static normalize(v) {\n        let mag = this.mag(v);\n        return { x: v.x / mag, y: v.y / mag };\n    }\n    static between(v1, v2, percentil) {\n        return new Vector2D(v1.x + (v2.x - v1.x) * percentil, v1.y + (v2.y - v1.y) * percentil);\n    }\n    static perpendicular(v) {\n        return new Vector2D(-1 * v.y, -1 * v.x);\n    }\n    static angleBetween(v1, v2) {\n        return Math.acos(Vector2D.dot(v1, v2) / (v1.mag() * v2.mag())) * (180 / Math.PI);\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Vector2D);\n//# sourceMappingURL=Vector2D.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/frontend/utils/Vector2D.js?')},"./vendor/pluglightjs/AgentPool.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass AgentPool{\n\n    #types;\n    #pools;\n    #Agent;\n    #nextID;\n\n    constructor(world){\n        this.world = world;\n        this.#types = {} // Type Object Pattern\n        this.#pools = {} // Object Pool Pattern\n        this.toBeRemoved = [];\n        this.#nextID = 0;\n        \n        this.#Agent = class Agent{\n\n            #type;\n            #collections;\n            #ID;\n\n            constructor(typeName,prototype, ID){\n\n                this._children = {};\n                this.#collections = {};\n                this.#type = typeName;\n                this.#ID   = ID;\n\n                if(prototype['info']){\n\n                    Object.keys(prototype['info']).forEach((field) => {\n                        let _field =  prototype['info'][field];\n\n                        if(typeof _field == 'object'){\n                            this[field] = Object.assign({},_field); \n                        }\n                        else{\n                            this[field] = _field;\n                        }\n                    });\n                }\n            }\n\n            getID(){\n                return this.#ID;\n            }\n\n            getType(){\n                return this.#type;\n            }\n\n            isInCollection(collectionName){\n                return this.#collections[collectionName];\n            }\n\n            getCollections(){\n                return Object.keys(this.#collections);\n            }\n\n            addCollection(collectionName){\n                this.#collections[collectionName] = 1;\n            }\n            removeCollection(collectionName){\n                delete this.#collections[collectionName];\n            }\n            reset(prototype, newID){\n\n                this.#ID = newID;\n\n                Object.keys(prototype['info']).forEach((field) => {\n                    let _field =  prototype['info'][field];\n                        if(typeof _field == 'object'){\n                        this[field] = Object.assign({},_field); \n                    }\n                    else{\n                        this[field] = _field;\n                    }\n                });\n            }\n        }\n    }\n\n    registerType(typeName,prototype){\n\n        // Defensive input check\n\n        if(typeof typeName !== 'string' || typeName == ''){\n            console.error(`Cannot create agentType with a type name defined as: ${typeName}; the type must be a non-empty string`);\n            return false;\n        }   \n\n        if(this.#types[typeName] != undefined){\n            console.error(`The type named '${typeName}' has already been registered`);\n            return false;\n        }\n\n        if(prototype == undefined){\n            console.error('Prototype cannot be undefined, it must be a JSON with the attributes of the agent')\n            return false;\n        }\n\n        //\n\n        this.#types[typeName] = prototype;\n        this.#pools[typeName] = [];\n\n        return true;\n    }\n\n\n    createAgent(typeName,details = undefined){\n\n        // Defensive input check\n\n        if(typeof typeName !== 'string' || typeName == ''){\n            console.error(`Cannot create agent with a type defined as: ${typeName}; the type must be a non-empty string`);\n            return false;\n        }   \n\n        if(!this.#types[typeName]){\n            console.error(`Cannot create agent with a type defined as: ${typeName}; the type doesn't exist at AgentPool`);\n            return false;\n        }\n\n        if(details != undefined && typeof details  !== 'object'){\n            console.error(`'details' must be an object`);\n            return false;\n        }\n\n        //\n        \n        var world = this.world;\n        var agent;\n        \n        if(this.#pools[typeName].length > 0){\n            agent = this.#pools[typeName].pop();\n            this.resetAgent(agent);\n        }\n        else{\n            agent = new this.#Agent(typeName,this.#types[typeName],this.#nextID++);\n        }\n\n        if(!(details && details['info'])) return agent;\n        \n        Object.keys(details['info']).forEach((detail) => {\n\n            if(details['info'][detail] != undefined){\n                agent[detail] = details['info'][detail];\n            }\n        })\n\n        // Defensive output type check\n\n        if(!(agent instanceof this.#Agent)){\n            console.error(`Something went wrong when creating a new Agent of type ${typeName}`);\n            return false;\n        }\n\n        return agent;\n    }\n\n    getCollectionsOfType(typeName){\n\n        if(!this.#types[typeName]){\n            console.warn(`Cannot get collections from unexisting type '${typename}'`);\n            return false;\n        }\n\n        let collections = this.#types[typeName].collections || [];\n\n        return collections;\n    }\n\n    storeToBeRemoved(agent){\n        this.toBeRemoved.push(agent);\n    }\n\n    removeAgent(agent){\n        try{\n\n            let agentType = agent.getType();\n            let agentCollections = agent.getCollections();\n            \n            agentCollections.forEach((collectionName) => {\n                this.world.removeFromCollection(collectionName,agent);\n            });\n            \n            let agentChildren = Object.keys(agent._children);\n            \n            while(agentChildren.length){\n                this.removeAgent(agent._children[agentChildren[0]]);\n                delete agent._children[agentChildren[0]];\n                agentChildren.shift();\n            }\n\n            this.#pools[agentType].push(agent);\n\n        }catch(err){\n            console.error(`Error, agent ${agent}`);\n            return false;\n        }\n    }\n\n    removeAgents(){\n\n        while(this.toBeRemoved.length){\n            let agent = this.toBeRemoved.pop();\n            this.removeAgent(agent);\n        }\n    }\n\n    resetAgent(agent){\n        let prototype = this.#types[agent.getType()];\n        agent.reset(prototype, this.#nextID++);\n    }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AgentPool);\n\n//# sourceURL=webpack://typescript-practice/./vendor/pluglightjs/AgentPool.js?")},"./vendor/pluglightjs/CollectionManager.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass CollectionManager {\n\n    #collections;\n\n    constructor(world){\n        this.world = world;\n        this.#collections = {};\n        this.toBeRemoved  = [];\n        this._objectPool   = []; // Only for internal use\n    }\n\n    registerCollection(name){\n\n        // Defensive input check\n\n        if(typeof name !== 'string' || name == ''){\n            console.error(`Cannot register collection with a name defined as: ${typeName}; the name must be a non-empty string`);\n            return false;\n        }   \n\n        if(this.#collections[name]){\n            console.error(`Collection named '${name}' already registered`);\n            return false;\n        }\n\n        //\n\n        this.#collections[name] = [];\n        return this;collection\n    }\n\n    getCollection(collectionName){\n\n        if(this.#collections[collectionName]){\n            return this.#collections[collectionName];\n        }\n\n        throw Error(`Cannot get unregistered collection '${collectionName}'`);\n\n    }\n\n    addToCollection(collectionName,object = undefined){\n\n        // Defensive input check \n\n        if(!this.#collections[collectionName]){\n            console.error(`collection named '${collectionName} is not registered'`);\n            return false;\n        }\n\n        if(typeof object != 'object' || !object.isInCollection || !object.addCollection ){\n            console.error(`The value passed as 'agent' is not a valid Agent object ${collectionName}`);\n            return false;\n        }\n       \n        if(object.isInCollection && object.isInCollection(collectionName)){\n            console.error(`The agent is already registered to collection ${collectionName}`);\n            return false;\n        }\n\n        //\n\n        this.#collections[collectionName].push(object);\n        object.addCollection(collectionName);\n\n        return true;\n    }\n\n    cacheToBeRemoved(collectionName,agent){\n\n        var data;\n\n        if(this._objectPool.length > 0){\n            data = this._objectPool.pop();\n            data.collectionName = collectionName;\n            data.agent = agent;\n\n            this.toBeRemoved.push(data);\n        }\n        else{\n            this.toBeRemoved.push({\n                collectionName : collectionName,\n                agent : agent\n            });\n        }\n    }\n\n    removeFromCollection(collectionName,object){\n\n        let index = this.#collections[collectionName].indexOf(object);\n        this.#collections[collectionName].splice(index,1);\n        object.removeCollection(collectionName);\n    }\n\n    removeAgentsFromCollections(){\n\n        while(this.toBeRemoved.length > 0){\n            let command = this.toBeRemoved.pop();\n            this.removeFromCollection(command.collectionName,command.agent);\n\n            command.collectionName = undefined;\n            command.agent = undefined;\n\n            this._objectPool.push(command);\n        }\n    }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CollectionManager);\n\n//# sourceURL=webpack://typescript-practice/./vendor/pluglightjs/CollectionManager.js?")},"./vendor/pluglightjs/EventManager.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass EventManager{\n\n    constructor(world){\n        this.world  = world;\n        this.events = {};\n    }\n\n    registerEvent(eventName){\n\n        if(this.events[eventName]){\n            console.warn(`Event named '${eventName} has already been registered'`);\n            return false;\n        }\n\n        this.events[eventName] = {};\n    }\n\n    registerServiceToEvent(serviceName,eventName){\n\n        if(!this.events[eventName]){\n            console.warn(`Cannot register service '${serviceName}' to unregistered event '${eventName}'`);\n            return false;\n        }\n\n        var service = this.world.getService(serviceName)\n\n        if(!service){\n            console.warn(`Cannot register service '${serviceName}' to event, because the service is not registered to the framework`);\n            return false;\n        }\n\n        if(typeof service[`on${eventName}`] != 'function'){\n            console.warn(`Cannot register service '${serviceName}' to event, because the service does not have a method 'on${eventName}'`);\n            return false;\n        }\n\n        this.events[eventName][serviceName] = service;\n    }\n\n    notifyToServices(eventName, details = undefined){\n\n        if(!this.events[eventName]){\n            console.warn(`Cannot notify event '${eventName}' because it does not exist`);\n            return false;\n        }\n\n        var services = Object.keys(this.events[eventName]);\n\n        services.forEach((serviceName) => { \n            this.world.getService(serviceName)[`on${eventName}`](details);\n        });\n    }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EventManager);\n\n//# sourceURL=webpack://typescript-practice/./vendor/pluglightjs/EventManager.js?")},"./vendor/pluglightjs/ServiceManager.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass ServiceManager {\n\n    #services;\n\n    constructor(world){\n        this.world = world;\n        this.#services = {};\n    }\n\n    registerService(name,service){\n\n        // Defensive input check\n\n        if(typeof name !== 'string' || name == ''){\n            console.error(`Cannot register service with a name defined as: ${typeName}; the name must be a non-empty string`);\n            return false;\n        }   \n\n        if(this.#services[name]){\n            console.error(`Service named '${name}' already registered`);\n            return false;\n        }\n\n        if(!service || service == null){\n            console.error(`Cannot register invalid or null service '${name}'`);\n            return false;\n        }\n\n        //\n\n        service.world = this.world;\n        this.#services[name] = service;\n        this.#services[name].init();\n\n        return true;\n    }\n\n    getServices(){\n        return this.#services;\n    }\n\n    getService(serviceName){\n\n        if(!this.#services[serviceName]){\n            throw Error(`Cannot get unregistered service '${serviceName}'`);\n            return false;\n        }\n\n        return this.#services[serviceName];\n    }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ServiceManager);\n\n//# sourceURL=webpack://typescript-practice/./vendor/pluglightjs/ServiceManager.js?")},"./vendor/pluglightjs/World.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _AgentPool_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AgentPool.js */ "./vendor/pluglightjs/AgentPool.js");\n/* harmony import */ var _CollectionManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CollectionManager.js */ "./vendor/pluglightjs/CollectionManager.js");\n/* harmony import */ var _EventManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./EventManager.js */ "./vendor/pluglightjs/EventManager.js");\n/* harmony import */ var _ServiceManager_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ServiceManager.js */ "./vendor/pluglightjs/ServiceManager.js");\n\n\n\n\n\nclass World {\n\n    #agentPool;\n    #collectionManager;\n    #serviceManager;\n    #eventManager;\n\n    constructor(){\n\n         // subordinate modules\n\n        this.#agentPool         = new _AgentPool_js__WEBPACK_IMPORTED_MODULE_0__["default"](this);\n        this.#collectionManager = new _CollectionManager_js__WEBPACK_IMPORTED_MODULE_1__["default"](this);\n        this.#eventManager      = new _EventManager_js__WEBPACK_IMPORTED_MODULE_2__["default"](this);\n        this.#serviceManager    = new _ServiceManager_js__WEBPACK_IMPORTED_MODULE_3__["default"](this);\n\n        //Iteration\n        this.lastTime = 10;\n        this.deltaTime = NaN;\n        this.fps = NaN;\n        this.frame = 0;\n        this.routine = () => {};\n        this.pause = false;\n    }\n\n    registerService(name,service){\n        return this.#serviceManager.registerService(name,service);\n    }\n\n    getServices(){\n        return this.#serviceManager.getServices();\n    }\n\n    getService(serviceName){\n        return this.#serviceManager.getService(serviceName);\n    }\n\n    registerCollection(name){\n        return this.#collectionManager.registerCollection(name);\n    }\n\n    getCollection(collectionName){\n        return this.#collectionManager.getCollection(collectionName);\n    }\n\n\n    addToCollection(collectionName,object){\n        return this.#collectionManager.addToCollection(collectionName,object);\n    }\n\n    removeFromCollection(collectionName,object){\n        return this.#collectionManager.cacheToBeRemoved(collectionName,object);\n    }\n\n    registerAgentType(typeName,prototype){\n        return this.#agentPool.registerType(typeName,prototype);\n    }\n\n    createAgent(typeName,details = undefined){\n\n        let agent = this.#agentPool.createAgent(typeName,details);\n        \n        let collections = this.#agentPool.getCollectionsOfType(typeName);\n\n        collections.forEach((collection) => {\n            this.addToCollection(collection, agent);\n        });\n\n        return agent;\n    }\n\n    removeAgent(agent){\n        this.#agentPool.storeToBeRemoved(agent);\n    }\n\n    registerEvent(eventName){\n        this.#eventManager.registerEvent(eventName);\n    }\n\n    registerServiceToEvent(serviceName,eventName){\n        this.#eventManager.registerServiceToEvent(serviceName,eventName);\n    }\n\n    notifyEvent(eventName,details){\n        this.#eventManager.notifyToServices(eventName,details);\n    }\n\n    execute(timeSpan = 20){\n        \n\n        if(this.pause){\n            return;\n        }\n\n        this.deltaTime = timeSpan - this.lastTime;\n\n        this.fps = 1000 / this.deltaTime;\n\n        this.lastTime = timeSpan;\n\n        requestAnimationFrame((timeSpan) => { this.execute(timeSpan) });\n\n        this.#agentPool.removeAgents();\n        this.#collectionManager.removeAgentsFromCollections();\n        var services = this.getServices();\n\n        Object.keys(services).forEach((service) => {\n                services[service].execute();\n        });\n\n        if(!this.pause){\n            this.frame++;\n            this.routine(this);\n        }\n    }\n\n    pauseExecution(){\n        this.pause = true;\n    }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (World);\n\n//# sourceURL=webpack://typescript-practice/./vendor/pluglightjs/World.js?')}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.d=(e,n)=>{for(var t in n)__webpack_require__.o(n,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./lib/frontend/Mirroware.js")})();