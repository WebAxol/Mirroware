/*! For license information please see Mirroware.min.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./lib/Initializer.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _pluglightjs_World_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../pluglightjs/World.js */ "./vendor/pluglightjs/World.js");\n/* harmony import */ var _Services_Service_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Services/Service.js */ "./lib/Services/Service.js");\n/* harmony import */ var _setUp_setUp_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./setUp/setUp.js */ "./lib/setUp/setUp.js");\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");\n    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === "m") throw new TypeError("Private method is not writable");\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");\n    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _Initializer_instances, _Initializer_hasBeenInitialized, _Initializer_initAgentTypes, _Initializer_initCollections, _Initializer_initServices;\n\n\n\nclass Initializer {\n    constructor(world) {\n        _Initializer_instances.add(this);\n        _Initializer_hasBeenInitialized.set(this, false);\n        this.world = world;\n    }\n    init(setUp) {\n        if (__classPrivateFieldGet(this, _Initializer_hasBeenInitialized, "f")) {\n            console.warn(\'The Mirroware instance has already been initialized\');\n            return false;\n        }\n        if (typeof setUp !== \'object\') {\n            console.error(\'The setUp argument must be an object\');\n            return false;\n        }\n        __classPrivateFieldGet(this, _Initializer_instances, "m", _Initializer_initAgentTypes).call(this, setUp.agentTypes);\n        __classPrivateFieldGet(this, _Initializer_instances, "m", _Initializer_initCollections).call(this, setUp.collections);\n        __classPrivateFieldGet(this, _Initializer_instances, "m", _Initializer_initServices).call(this, setUp.services);\n        __classPrivateFieldSet(this, _Initializer_hasBeenInitialized, true, "f");\n        return true;\n    }\n}\n_Initializer_hasBeenInitialized = new WeakMap(), _Initializer_instances = new WeakSet(), _Initializer_initAgentTypes = function _Initializer_initAgentTypes(agentTypes) {\n    if (typeof agentTypes != \'object\') {\n        console.error(\'Cannot initialize agent types: the were not passed as an object embedded at setUp\');\n        return false;\n    }\n    const types = Object.keys(agentTypes);\n    types.forEach((typeName) => {\n        let prototype = agentTypes[typeName];\n        if (typeof prototype != \'object\') {\n            console.error(\'Each type must be a key value pair, mapping each type with a prototype for each object instanced with that type\');\n            return false;\n        }\n        this.world.registerAgentType(typeName, prototype);\n    });\n    return true;\n}, _Initializer_initCollections = function _Initializer_initCollections(collections) {\n    if (!(collections instanceof Array)) {\n        console.error("The field \'collections\' must be a string array with the names of each collection");\n        return false;\n    }\n    collections.forEach(collectionName => {\n        let registered = false;\n        if (typeof collectionName == \'string\' && collectionName != \'\')\n            registered = this.world.registerCollection(collectionName);\n        if (!registered)\n            console.error(`Collection named: \'${collectionName}\' could not be registered`);\n    });\n    return true;\n}, _Initializer_initServices = function _Initializer_initServices(services) {\n    if (typeof services != \'object\') {\n        console.error(\'Cannot initialize services: the were not passed as an object embedded at setUp\');\n        return false;\n    }\n    const serviceNames = Object.keys(services);\n    serviceNames.forEach((serviceName) => {\n        let serviceInstance = services[serviceName];\n        if (!(serviceInstance instanceof _Services_Service_js__WEBPACK_IMPORTED_MODULE_1__["default"])) {\n            console.error(`Cannot register service: "${serviceName}": it must be a key value pair, mapping each service name with an instance of its respective service`);\n        }\n        this.world.registerService(serviceName, serviceInstance);\n    });\n    return true;\n};\nconst app = new _pluglightjs_World_js__WEBPACK_IMPORTED_MODULE_0__["default"]();\nconst _init = new Initializer(app);\n_init.init(_setUp_setUp_js__WEBPACK_IMPORTED_MODULE_2__.appSetUp);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (app);\n//# sourceMappingURL=Initializer.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/Initializer.js?')},"./lib/Mirroware.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Initializer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Initializer.js */ \"./lib/Initializer.js\");\n/* harmony import */ var _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/scene/Camera.js */ \"./lib/utils/scene/Camera.js\");\n/* harmony import */ var _utils_scene_SceneBuilder_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/scene/SceneBuilder.js */ \"./lib/utils/scene/SceneBuilder.js\");\n\n\n\n_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.init(_Initializer_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"], {\n    x: 22,\n    y: 17,\n    dx: -1,\n    dy: -2,\n    fov: 100.1\n});\nconst scene = [\n    { type: 'Wall', info: [[-1e10, -1e10], [-1e10, 1e10], 1, '255,0,0'] },\n    { type: 'Wall', info: [[-1e10, -1e10], [1e10, -1e10], 1, '255,0,0'] },\n    { type: 'Wall', info: [[1e10, -1e10], [1e10, 1e10], 1, '255,0,0'] },\n    { type: 'Wall', info: [[1e10, 1e10], [-1e10, 1e10], 1, '255,0,0'] },\n    { type: 'Wall', info: [[2, 2], [4, 2], 1, '255,0,0'] },\n    { type: 'Wall', info: [[2, 2], [2, 4], 1, '0,255,0'] },\n    { type: 'Wall', info: [[5, 5], [5, 25], 1, '255,255,0'] },\n    { type: 'Wall', info: [[10, 5], [10, -20], 1, '0,255,0'] },\n    { type: 'Wall', info: [[12, 5], [12, -20], 1, '255,0,0'] },\n    { type: 'Wall', info: [[5, -24], [5, -25], 1, '255,0,100'] },\n    { type: 'Wall', info: [[5, -21], [5, -20], 1, '0,255,100'] },\n    { type: 'Wall', info: [[5, -21], [-20, -21], 1, '0,255,0'] },\n    { type: 'Wall', info: [[5, -24], [-20, -24], 1, '255,0,100'] },\n    { type: 'Wall', info: [[5, -20], [10, -20], 1, '0,255,100'] },\n    { type: 'Wall', info: [[12, -20], [25, -20], 1, '0,255,100'] },\n    { type: 'Wall', info: [[5, -25], [35, -25], 1, '255,157,0'] },\n    { type: 'Wall', info: [[25, -20], [25, -25], 1, '255,157,0'] },\n    { type: 'Wall', info: [[-25, -20], [-25, -25], 1, '255,157,0'] },\n    { type: 'Wall', info: [[5, 5], [10, 5], 1, '0,255,100'] },\n    { type: 'Wall', info: [[12, 5], [25, 5], 1, '0,255,100'] },\n    { type: 'Wall', info: [[5, 7], [7, 7], 1, '0,255,100'] },\n    { type: 'Wall', info: [[7, 5], [7, 7], 1, '37, 190, 42'] },\n    { type: 'Wall', info: [[7, 13], [7, 20], 0.9, '0,155,200'] },\n    { type: 'Wall', info: [[15, 15], [15, 14], 1, '0,100,100'] },\n    { type: 'Wall', info: [[7, 20], [15, 20], 0.3, '255,46,87'] },\n    { type: 'Wall', info: [[7, 15], [15, 15], 0.3, '0,100,100'] },\n    { type: 'Wall', info: [[7, 14], [15, 14], 1, '0,100,100'] },\n    { type: 'Wall', info: [[15, 19], [15, 20], 1, '255,46,87'] },\n    { type: 'Wall', info: [[25, 5], [25, 25], 1, '150,150,150'] },\n    { type: 'Wall', info: [[5, 25], [25, 25], 1, '255,255,255'] },\n    { type: 'Wall', info: [[15, 7], [17, 7], 1, '255,0,255'] },\n    { type: 'Wall', info: [[15, 7], [15, 10], 1, '255,155,255'] },\n    { type: 'Wall', info: [[15, 10], [15.5, 10], 1, '255,155,200'] },\n    { type: 'Wall', info: [[17, 7], [17, 10], 1, '255,155,255'] },\n    { type: 'Wall', info: [[16.5, 7], [16.5, 10], 0.1, '255,0,255'] },\n    { type: 'Wall', info: [[16.5, 10], [17, 10], 1, '255,155,200'] },\n    { type: 'Wall', info: [[19, 12], [22, 12], 0.1, '0,255,100'] },\n    { type: 'Wall', info: [[19, 15], [22, 15], 0.1, '0,255,100'] },\n    { type: 'Wall', info: [[22, 12], [22, 15], 0.1, '255,157,0'] },\n    { type: 'Wall', info: [[19, 12], [19, 15], 0.1, '255,157,0'] },\n    { type: 'Circle', info: [_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.pos, 0.3, 1, '255,0,0'] },\n    { type: 'Circle', info: [{ x: 17, y: 17 }, 1.0, 1, '0, 0, 0'] },\n];\nconst sceneBuilder = new _utils_scene_SceneBuilder_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](_Initializer_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nsceneBuilder.build(scene);\nconst commands = {\n    'o': () => { console.log(_Initializer_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]); },\n    'c': () => { console.log(_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera); },\n    'p': () => {\n        _Initializer_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pauseExecution();\n        console.log('execution paused');\n    },\n    'r': () => {\n        _Initializer_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pause = false;\n        _Initializer_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].execute();\n        console.log('execution resumed');\n    }\n};\nwindow.addEventListener('keydown', (e) => {\n    if (commands[e.key])\n        commands[e.key]();\n});\n_Initializer_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].execute();\ndocument.addEventListener(\"dblclick\", () => {\n    document.documentElement.requestFullscreen().then((res) => {\n        console.log(\"XXXXXXXXXXXXXX\");\n    }).catch((e) => {\n        console.log(e);\n    });\n});\n//# sourceMappingURL=Mirroware.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/Mirroware.js?")},"./lib/Services/2DRendering/SceneRenderer2D.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Service.js */ "./lib/Services/Service.js");\n/* harmony import */ var _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n/* harmony import */ var _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/scene/Camera.js */ "./lib/utils/scene/Camera.js");\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === "m") throw new TypeError("Private method is not writable");\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");\n    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");\n    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _SceneRenderer2D_context;\n\n\n\nclass SceneRenderer2D extends _Service_js__WEBPACK_IMPORTED_MODULE_0__["default"] {\n    constructor(canvas) {\n        super();\n        _SceneRenderer2D_context.set(this, void 0);\n        __classPrivateFieldSet(this, _SceneRenderer2D_context, canvas.getContext(\'2d\'), "f");\n        this.scale = 1.5 * 3;\n    }\n    execute() {\n        const horizontalWalls = this.world.getCollection(\'HorizontalWalls\');\n        const verticalWalls = this.world.getCollection(\'VerticalWalls\');\n        const circles = this.world.getCollection(\'Circles\');\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").fillStyle = \'rgba(0,0,0,1)\';\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").fillRect(0, 0, 3000, 3000);\n        horizontalWalls.forEach(wall => {\n            this.renderWall(wall);\n        });\n        verticalWalls.forEach(wall => {\n            this.renderWall(wall);\n        });\n        circles.forEach(circle => {\n            this.renderCircle(circle);\n        });\n    }\n    ;\n    renderWall(wall) {\n        if (!_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.castCenter)\n            return;\n        const deg = _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.castCenter?.direction.angle() * (180 / Math.PI);\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").strokeStyle = `rgba(${wall.color},1)`;\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").lineWidth = 1;\n        let from = { x: wall.startX || wall.posX, y: wall.posY || wall.startY };\n        let to = { x: wall.endX || wall.posX, y: wall.posY || wall.endY };\n        from = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].rotate(from, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.pos, deg);\n        to = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].rotate(to, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.pos, deg);\n        from = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].sub(_utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].sub(from, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.pos), { x: -10, y: -10 }).scale(this.scale);\n        to = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].sub(_utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].sub(to, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.pos), { x: -10, y: -10 }).scale(this.scale);\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").beginPath();\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").moveTo(from.x, from.y);\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").lineTo(to.x, to.y);\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").closePath();\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").stroke();\n    }\n    renderCircle(circle) {\n        if (!_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.castCenter)\n            return;\n        const deg = _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.castCenter?.direction.angle() * (180 / Math.PI);\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").strokeStyle = `rgb(${circle.color})`;\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").lineWidth = 1;\n        let center = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].rotate(circle.center, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.pos, deg);\n        center = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].sub(_utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].sub(center, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.pos), { x: -10, y: -10 }).scale(this.scale);\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").beginPath();\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").arc(center.x, center.y, circle.radius * this.scale, 0, 2 * Math.PI);\n        __classPrivateFieldGet(this, _SceneRenderer2D_context, "f").stroke();\n    }\n}\n_SceneRenderer2D_context = new WeakMap();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SceneRenderer2D);\n//# sourceMappingURL=SceneRenderer2D.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/Services/2DRendering/SceneRenderer2D.js?')},"./lib/Services/Camera/CameraMover.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Service.js */ "./lib/Services/Service.js");\n/* harmony import */ var _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/scene/Camera.js */ "./lib/utils/scene/Camera.js");\n/* harmony import */ var _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n\n\n\nclass CameraMover extends _Service_js__WEBPACK_IMPORTED_MODULE_0__["default"] {\n    constructor() {\n        super();\n        this.keyPressCount = 0;\n        this.speed = 0;\n        this.dt = 0;\n        this.command_KeyMap = {\n            w: () => { this.translateCamera(1, 0); },\n            s: () => { this.translateCamera(-1, 0); },\n            a: () => { this.translateCamera(0, 1); },\n            d: () => { this.translateCamera(0, -1); },\n            k: () => { this.rotateCamera(30 * this.dt); },\n            l: () => { this.rotateCamera(-30 * this.dt); },\n        };\n        this.control = {\n            w: false,\n            s: false,\n            d: false,\n            a: false,\n            k: false,\n            l: false\n        };\n    }\n    execute() {\n        this.dt = 50 / this.world.fps;\n        this.speed = 0.09 * this.dt;\n        let keys = Object.keys(this.control);\n        keys.forEach((key) => {\n            if (this.control[key] === true) {\n                this.command_KeyMap[key]();\n            }\n        });\n    }\n    rotateCamera(angle = 0) {\n        if (!_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera || !_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castEdge || !_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castCenter)\n            return false;\n        const complex = [Math.cos(angle / Math.PI / 180), Math.sin(angle / Math.PI / 180)];\n        _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castCenter.direction.complexRotate(complex);\n        _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castEdge.direction.complexRotate(complex);\n    }\n    ;\n    translateCamera(forward = 0, lateral = 0) {\n        if (!_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera || !_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castEdge || !_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castCenter)\n            return false;\n        const complex = [Math.cos(Math.PI / 2), Math.sin(Math.PI / 2)];\n        let frontalMovement = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__["default"].scale(_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castCenter.direction, forward);\n        let lateralMovement = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__["default"].complexRotate(_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castCenter.direction, complex).scale(lateral);\n        let movementDirection = frontalMovement.add(lateralMovement).normalize();\n        let displacement = movementDirection.scale(this.speed);\n        _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.pos.add(displacement);\n    }\n    onkeydown(info) {\n        if (this.control[info.key] !== undefined && this.control[info.key] !== true) {\n            this.control[info.key] = true;\n        }\n    }\n    onkeyup(info) {\n        if (this.control[info.key] !== undefined && this.control[info.key] !== false) {\n            this.control[info.key] = false;\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CameraMover);\n//# sourceMappingURL=CameraMover.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/Services/Camera/CameraMover.js?')},"./lib/Services/Camera/InputHandler.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Service.js */ \"./lib/Services/Service.js\");\n\nclass InputHandler extends _Service_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor() {\n        super();\n    }\n    init() {\n        window.addEventListener('keydown', (e) => { this.keydown(e); });\n        window.addEventListener('keyup', (e) => { this.keyup(e); });\n        this.world.registerEvent('keydown');\n        this.world.registerEvent('keyup');\n        this.world.registerServiceToEvent('CameraMover', 'keydown');\n        this.world.registerServiceToEvent('CameraMover', 'keyup');\n        return true;\n    }\n    keydown(e) {\n        if (!this.world.pause)\n            this.world.notifyEvent('keydown', { key: e.key });\n    }\n    keyup(e) {\n        if (!this.world.pause)\n            this.world.notifyEvent('keyup', { key: e.key });\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (InputHandler);\n//# sourceMappingURL=InputHandler.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/Services/Camera/InputHandler.js?")},"./lib/Services/SceneRendering/DataModeller.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config.js */ "./lib/config.js");\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Service.js */ "./lib/Services/Service.js");\n/* harmony import */ var _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../setUp/webGL.js */ "./lib/setUp/webGL.js");\n/* harmony import */ var _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/scene/Camera.js */ "./lib/utils/scene/Camera.js");\n\n\n\n\n\nclass DataModeller extends _Service_js__WEBPACK_IMPORTED_MODULE_2__["default"] {\n    constructor(chief) {\n        super();\n        this.chief = chief;\n        this.memoryIndex = 0;\n        this.initialized = false;\n        this.frontBuffer = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.createBuffer();\n        this.frontElementBuffer = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.createBuffer();\n        this.lyingBuffer = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.createBuffer();\n        this.lyingElementBuffer = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.createBuffer();\n        const head = {};\n        const n = 14;\n        var node = head;\n        for (let i = 0; i <= n; i++) {\n            node.itemID = -1;\n            node.color = [NaN, NaN];\n            node.x = [NaN, NaN];\n            node.y = [NaN, NaN];\n            node.z = [NaN, NaN];\n            node.t = [NaN, NaN];\n            node.l = [1, 1];\n            node.child = undefined;\n            node.stripped = false;\n            if (i == n)\n                continue;\n            node.child = {};\n            node = node.child;\n        }\n        this.cache = head;\n        console.log(this.cache);\n        this.chief.world.pauseExecution();\n    }\n    init() {\n        const locator = this.chief.locator;\n        this.frontBuffer = locator.getBuffer("ARRAY_BUFFER", "frontBuffer");\n        this.frontElementBuffer = locator.getBuffer("ELEMENT_ARRAY_BUFFER", "frontBuffer");\n        this.lyingBuffer = locator.getBuffer("ARRAY_BUFFER", "lyingBuffer");\n        this.lyingElementBuffer = locator.getBuffer("ELEMENT_ARRAY_BUFFER", "lyingBuffer");\n        this.initialized = true;\n    }\n    reset() {\n        this.memoryIndex = 0;\n        var cache = this.cache;\n        while (cache) {\n            cache.itemID = -1;\n            cache.stripped = true;\n            cache = cache.child;\n        }\n    }\n    mapTexture(collidesAt, item) {\n        if (collidesAt == null)\n            return 0;\n        if (item.getType() == "Circle")\n            return this.mapCylindricalTexture(collidesAt, item);\n        return this.mapLinearTexture(collidesAt, item);\n    }\n    mapLinearTexture(collidesAt, wall) {\n        let percentage = 0;\n        if (wall.getType() === \'HorizontalWall\') {\n            let wallLength = wall.endX - wall.startX;\n            percentage = Math.abs(((collidesAt.x - wall.startX)));\n        }\n        else if (wall.getType() === \'VerticalWall\') {\n            let wallLength = wall.endY - wall.startY;\n            percentage = Math.abs((collidesAt.y - wall.startY));\n        }\n        return percentage;\n    }\n    mapCylindricalTexture(collidesAt, cyl) {\n        let _angle = Math.ceil(this.chief.world.frame / 1) / 50;\n        const direction = new _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](Math.cos(_angle), Math.sin(_angle));\n        const centerToPoint = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].sub(collidesAt, cyl.center);\n        const angle = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].angleBetween(centerToPoint, direction);\n        return angle / (Math.PI / (cyl.radius * 2));\n    }\n    model(ray, angle, index) {\n        if (!this.initialized)\n            this.init();\n        const znear = 1 / Math.tan(_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_4__.camera.FOV * Math.PI / 360);\n        const deltaAngle = (_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_4__.camera.FOV / _config_js__WEBPACK_IMPORTED_MODULE_1__["default"].resolution) * (Math.PI / 180) * -1;\n        var cache = this.cache;\n        var itemID = -1;\n        var depth = 0;\n        var currentX, currentY, currentT, currentL = 1;\n        var currentColor;\n        var lyingSurf = [];\n        var frontSurf = [];\n        var lyingElement = [];\n        var frontElement = [];\n        var cut = false, stripped = false;\n        var level = -1;\n        while (cache) {\n            itemID = -1;\n            if (ray && ray.collidesWith) {\n                itemID = ray.collidesWith.getID();\n                stripped = ray.collidesWith.getType() == "Circle";\n                depth += ray.lambda * Math.cos(Math.abs(angle));\n                currentY = 0.01 + znear / depth;\n                currentX = Math.tan(angle - deltaAngle) * znear * ((index <= _config_js__WEBPACK_IMPORTED_MODULE_1__["default"].resolution / 2) ? -1 : 1);\n                currentT = this.mapTexture(ray.collidesAt, ray.collidesWith);\n                currentColor = (ray.collidesWith ? ray.collidesWith.color + `,${ray.collidesWith.opacity}` : "0,0,0,1")\n                    .split(\',\')\n                    .map((component, i) => { return i < 3 ? parseFloat(component) / 255 : parseFloat(component); });\n            }\n            cut = cache.itemID >= 0 && (cut || (cache.itemID !== itemID || index === _config_js__WEBPACK_IMPORTED_MODULE_1__["default"].resolution - 1 || cache.stripped));\n            if (cut) {\n                this.memoryIndex++;\n                level++;\n                let { x, y, z, t, l } = cache;\n                frontSurf = [\n                    x[0] * z[0], y[0] * z[0], z[0], ...cache.color[0], t[0], 0,\n                    x[1] * z[1], y[1] * z[1], z[1], ...cache.color[1], t[1], 0,\n                    x[1] * z[1], -y[1] * z[1], z[1], ...cache.color[1], t[1], 1,\n                    x[0] * z[0], -y[0] * z[0], z[0], ...cache.color[0], t[0], 1,\n                ]\n                    .concat(frontSurf);\n                frontElement = ([\n                    0, 1, 2,\n                    0, 3, 2,\n                ]\n                    .map((i) => { return i + (this.memoryIndex - level) * 4; })).concat(frontElement.map((i) => { return i + 4; }));\n                lyingSurf = [\n                    x[0] * z[0], l[0] * z[0], z[0], 1,\n                    x[1] * z[1], l[1] * z[1], z[1], 1,\n                    x[1] * z[0], y[1] * z[0], z[0], 1,\n                    x[0] * z[1], y[0] * z[1], z[1], 1,\n                    x[0] * z[0], -y[0] * z[0], z[0], -1,\n                    x[1] * z[1], -y[1] * z[1], z[1], -1,\n                    x[1] * z[1], -l[1] * z[1], z[1], -1,\n                    x[0] * z[0], -l[0] * z[0], z[0], -1,\n                ]\n                    .concat(lyingSurf);\n                lyingElement = [\n                    0, 1, 2,\n                    0, 3, 2,\n                    4, 5, 6,\n                    4, 7, 6\n                ]\n                    .map((i) => { return i + (this.memoryIndex - level) * 8; })\n                    .concat(lyingElement.map((i) => { return i + 8; }));\n                cache.itemID = itemID;\n                cache.color[0] = currentColor;\n                cache.x[0] = x[1];\n                cache.y[0] = currentY;\n                cache.l[0] = currentL;\n                cache.z[0] = depth;\n                cache.t[0] = currentT;\n                cache.stripped = stripped;\n            }\n            if (cache.itemID < 0 && ray) {\n                cache.itemID = itemID;\n                cache.color[0] = currentColor;\n                cache.color[1] = currentColor;\n                cache.x[0] = currentX;\n                cache.y[0] = currentY;\n                cache.t[0] = currentT;\n                cache.l[0] = currentL;\n            }\n            cache.color[1] = currentColor;\n            cache.x[1] = currentX;\n            cache.y[1] = currentY;\n            cache.t[1] = currentT;\n            cache.l[1] = currentL;\n            cache.z[1] = depth;\n            ray = (ray && ray.reflected && ray.reflected.active) ? ray.reflected : null;\n            currentL = currentY;\n            cache = cache.child;\n        }\n        if (!frontSurf.length)\n            return;\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.bindBuffer(_setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.ARRAY_BUFFER, this.frontBuffer);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.bufferSubData(_setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.ARRAY_BUFFER, (this.memoryIndex - level) * 9 * 4 * Float32Array.BYTES_PER_ELEMENT, new Float32Array(frontSurf));\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.bindBuffer(_setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.ELEMENT_ARRAY_BUFFER, this.frontElementBuffer);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.bufferSubData(_setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.ELEMENT_ARRAY_BUFFER, (this.memoryIndex - level) * 6 * Uint16Array.BYTES_PER_ELEMENT, new Uint16Array(frontElement));\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.bindBuffer(_setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.ARRAY_BUFFER, this.lyingBuffer);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.bufferSubData(_setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.ARRAY_BUFFER, (this.memoryIndex - level) * 8 * 4 * Float32Array.BYTES_PER_ELEMENT, new Float32Array(lyingSurf));\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.bindBuffer(_setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.ELEMENT_ARRAY_BUFFER, this.lyingElementBuffer);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.bufferSubData(_setUp_webGL_js__WEBPACK_IMPORTED_MODULE_3__.gl.ELEMENT_ARRAY_BUFFER, (this.memoryIndex - level) * 12 * Uint16Array.BYTES_PER_ELEMENT, new Uint16Array(lyingElement));\n    }\n}\n;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DataModeller);\n//# sourceMappingURL=DataModeller.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/Services/SceneRendering/DataModeller.js?')},"./lib/Services/SceneRendering/Orchestrator.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Service.js */ "./lib/Services/Service.js");\n/* harmony import */ var _SpaceSearcher_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SpaceSearcher.js */ "./lib/Services/SceneRendering/SpaceSearcher.js");\n/* harmony import */ var _RayCaster_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RayCaster.js */ "./lib/Services/SceneRendering/RayCaster.js");\n/* harmony import */ var _DataModeller_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DataModeller.js */ "./lib/Services/SceneRendering/DataModeller.js");\n/* harmony import */ var _Renderer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Renderer.js */ "./lib/Services/SceneRendering/Renderer.js");\n/* harmony import */ var _utils_rendering_LocatorGL_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/rendering/LocatorGL.js */ "./lib/utils/rendering/LocatorGL.js");\n/* harmony import */ var _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../setUp/webGL.js */ "./lib/setUp/webGL.js");\n/* harmony import */ var _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utils/scene/Camera.js */ "./lib/utils/scene/Camera.js");\n/* harmony import */ var _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../config.js */ "./lib/config.js");\n/* harmony import */ var _setUp_canvases_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../setUp/canvases.js */ "./lib/setUp/canvases.js");\n\n\n\n\n\n\n\n\n\n\n\nconst ctx = _setUp_canvases_js__WEBPACK_IMPORTED_MODULE_10__["default"].canvas2d.getContext(\'2d\');\nclass RenderingPipeline extends _Service_js__WEBPACK_IMPORTED_MODULE_0__["default"] {\n    constructor() {\n        super();\n        this.spaceSearcher = new _SpaceSearcher_js__WEBPACK_IMPORTED_MODULE_1__["default"](this);\n        this.rayCaster = new _RayCaster_js__WEBPACK_IMPORTED_MODULE_2__["default"](this);\n        this.dataModeller = new _DataModeller_js__WEBPACK_IMPORTED_MODULE_3__["default"](this);\n        this.renderer = new _Renderer_js__WEBPACK_IMPORTED_MODULE_4__["default"](this);\n    }\n    __debugRay__(ray) {\n        if (!_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.castCenter)\n            return;\n        const deg = _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.castCenter?.direction.angle() * (180 / Math.PI);\n        ctx.strokeStyle = \'rgba(255,255,255,0.01)\';\n        ctx.lineWidth = 1;\n        let from = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__["default"].rotate(ray.source, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.pos, deg);\n        let to = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__["default"].rotate(ray.collidesAt, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.pos, deg);\n        from = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__["default"].sub(_utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__["default"].sub(from, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.pos), { x: -10, y: -10 }).scale(1.5 * 3);\n        to = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__["default"].sub(_utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__["default"].sub(to, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.pos), { x: -10, y: -10 }).scale(1.5 * 3);\n        ctx.beginPath();\n        ctx.moveTo(from.x, from.y);\n        ctx.lineTo(to.x, to.y);\n        ctx.closePath();\n        ctx.stroke();\n        if (!ray.reflected || !ray.reflected.active)\n            return;\n        this.__debugRay__(ray.reflected);\n    }\n    execute() {\n        if (!this.locator)\n            return false;\n        if (!_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera || !_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.castEdge || !_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.castCenter)\n            return false;\n        const wallIndices = this.spaceSearcher.getIndicesOfClosest(_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera);\n        const ray = _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.castEdge;\n        const rotationAngle = (_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.FOV / _config_js__WEBPACK_IMPORTED_MODULE_9__["default"].resolution) * (Math.PI / 180) * -1;\n        const complexRotator = [Math.cos(rotationAngle), Math.sin(rotationAngle)];\n        const direction = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__["default"].copy(ray.direction);\n        this.dataModeller.reset();\n        for (let i = 0; i < _config_js__WEBPACK_IMPORTED_MODULE_9__["default"].resolution; i++) {\n            ray.direction.complexRotate(complexRotator);\n            if (ray.reflected)\n                ray.reflected.active = false;\n            this.rayCaster.castRay(ray, Object.assign({}, wallIndices));\n            this.__debugRay__(ray);\n            let angle = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__["default"].angleBetween(_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.castCenter.direction, ray.direction);\n            this.dataModeller.model(ray, angle, i);\n        }\n        let amount = this.dataModeller.memoryIndex;\n        this.renderer.render(amount);\n        ray.direction = direction;\n        return true;\n    }\n}\n;\n_setUp_webGL_js__WEBPACK_IMPORTED_MODULE_6__.locatorPromise\n    .then((locator) => { if (locator instanceof _utils_rendering_LocatorGL_js__WEBPACK_IMPORTED_MODULE_5__["default"])\n    RenderingPipeline.prototype.locator = locator; })\n    .catch((err) => { throw Error(err); });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RenderingPipeline);\n//# sourceMappingURL=Orchestrator.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/Services/SceneRendering/Orchestrator.js?')},"./lib/Services/SceneRendering/RayCaster.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_physics_CollisionDetector_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/physics/CollisionDetector.js */ "./lib/utils/physics/CollisionDetector.js");\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Service.js */ "./lib/Services/Service.js");\n/* harmony import */ var _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === "m") throw new TypeError("Private method is not writable");\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");\n    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");\n    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _RayCaster_chief;\n\n\n\nclass RayCaster extends _Service_js__WEBPACK_IMPORTED_MODULE_1__["default"] {\n    constructor(chief) {\n        super();\n        _RayCaster_chief.set(this, void 0);\n        __classPrivateFieldSet(this, _RayCaster_chief, chief, "f");\n    }\n    castRay(ray, indices) {\n        if (ray.reflected)\n            ray.reflected.active = false;\n        ray.collidesWith = null;\n        ray.lambda = Infinity;\n        const wallCollision = this.iterativeWallCollisionTest(ray, indices);\n        const circleCollision = this.testAgainstCircles(ray);\n        if (!wallCollision && !circleCollision)\n            return;\n        if (ray.level < 15 && ray.collidesWith.opacity < 1 && this.reflect(ray))\n            this.castRay(ray.reflected, indices);\n    }\n    reflect(ray) {\n        if (!ray.collidesWith)\n            return false;\n        if (!ray.reflected) {\n            ray.reflected = __classPrivateFieldGet(this, _RayCaster_chief, "f").world.createAgent(\'Ray\');\n            ray.reflected.level = ray.level + 1;\n        }\n        ray.reflected.source = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__["default"].copy(ray.collidesAt);\n        ray.reflected.direction = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__["default"].copy(ray.direction);\n        ray.reflected.active = true;\n        const surfaceType = ray.collidesWith.getType();\n        const strategy = {\n            HorizontalWall: (reflected) => { reflected.direction.y *= -1; },\n            VerticalWall: (reflected) => { reflected.direction.x *= -1; },\n            Circle: (reflected) => {\n                const circle = ray.collidesWith;\n                const pointToCenter = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__["default"].sub(circle.center, ray.collidesAt);\n                const angleBetween = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__["default"].angleBetween(_utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__["default"].scale(ray.direction, -1), pointToCenter);\n                const sense = (ray.direction.x > 0 ? 1 : -1);\n                reflected.direction\n                    .complexRotate([\n                    Math.cos(sense * angleBetween * 2),\n                    Math.sin(sense * angleBetween * 2)\n                ]);\n                reflected.source.add(_utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__["default"].scale(reflected.direction, 0.01));\n                reflected.direction.scale(-1);\n            }\n        };\n        const reflectStrategy = strategy[surfaceType];\n        if (!reflectStrategy)\n            return false;\n        reflectStrategy(ray.reflected);\n        return true;\n    }\n    iterativeWallCollisionTest(ray, indices) {\n        const sense = { x: ray.direction.x > 0 ? 1 : -1, y: ray.direction.y > 0 ? 1 : -1 };\n        const horizontalWalls = __classPrivateFieldGet(this, _RayCaster_chief, "f").world.getCollection(\'HorizontalWalls\');\n        const verticalWalls = __classPrivateFieldGet(this, _RayCaster_chief, "f").world.getCollection(\'VerticalWalls\');\n        var wallH, wallV, lambdaH, lambdaV, collision;\n        while ((indices.horizontal < horizontalWalls.length && sense.y == 1) || (indices.horizontal >= 0 && sense.y == -1) ||\n            (indices.vertical < verticalWalls.length && sense.x == 1) || (indices.vertical >= 0 && sense.x == -1)) {\n            wallH = horizontalWalls[indices.horizontal + (sense.y == 1 ? 1 : 0)];\n            wallV = verticalWalls[indices.vertical + (sense.x == 1 ? 1 : 0)];\n            lambdaH = wallH ? _utils_physics_CollisionDetector_js__WEBPACK_IMPORTED_MODULE_0__["default"].RayVsHorizontalLine(ray, wallH.posY) : Infinity;\n            lambdaV = wallV ? _utils_physics_CollisionDetector_js__WEBPACK_IMPORTED_MODULE_0__["default"].RayVsVerticalLine(ray, wallV.posX) : Infinity;\n            if (lambdaV === lambdaH)\n                break;\n            collision = (lambdaH < lambdaV) ? _utils_physics_CollisionDetector_js__WEBPACK_IMPORTED_MODULE_0__["default"].RayVsHorizontalWall(ray, wallH) : _utils_physics_CollisionDetector_js__WEBPACK_IMPORTED_MODULE_0__["default"].RayVsVerticalWall(ray, wallV);\n            if (collision) {\n                ray.collidesAt = collision;\n                ray.lambda = Math.min(lambdaH, lambdaV);\n                ray.collidesWith = (lambdaH <= lambdaV) ? wallH : wallV;\n                break;\n            }\n            indices.horizontal += (lambdaH <= lambdaV) ? sense.y : 0;\n            indices.vertical += (lambdaH >= lambdaV) ? sense.x : 0;\n        }\n        ;\n        return collision ? true : false;\n    }\n    testAgainstCircles(ray) {\n        const circles = __classPrivateFieldGet(this, _RayCaster_chief, "f").world.getCollection(\'Circles\');\n        var collided = false, collision;\n        for (let i = 0; i < circles.length; i++) {\n            collision = _utils_physics_CollisionDetector_js__WEBPACK_IMPORTED_MODULE_0__["default"].RayVsCircle(ray, circles[i]);\n            if (!collision)\n                continue;\n            if (ray.lambda <= collision.lambda)\n                continue;\n            collided = true;\n            ray.collidesAt = collision.point;\n            ray.lambda = collision.lambda;\n            ray.collidesWith = circles[i];\n        }\n        return collided;\n    }\n}\n_RayCaster_chief = new WeakMap();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RayCaster);\n//# sourceMappingURL=RayCaster.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/Services/SceneRendering/RayCaster.js?')},"./lib/Services/SceneRendering/Renderer.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Service.js */ "./lib/Services/Service.js");\n/* harmony import */ var _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../setUp/webGL.js */ "./lib/setUp/webGL.js");\n/* harmony import */ var _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/scene/Camera.js */ "./lib/utils/scene/Camera.js");\n\n\n\nclass Renderer extends _Service_js__WEBPACK_IMPORTED_MODULE_0__["default"] {\n    constructor(chief) {\n        super();\n        this.initialized = false;\n        this.frontBuffer = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.createBuffer();\n        this.frontElementBuffer = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.createBuffer();\n        this.lyingBuffer = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.createBuffer();\n        this.lyingElementBuffer = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.createBuffer();\n        this.frontProgram = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.createProgram();\n        this.lyingProgram = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.createProgram();\n        this.chief = chief;\n    }\n    init() {\n        const locator = this.chief.locator;\n        this.frontBuffer = locator.getBuffer("ARRAY_BUFFER", "frontBuffer");\n        this.frontElementBuffer = locator.getBuffer("ELEMENT_ARRAY_BUFFER", "frontBuffer");\n        this.lyingBuffer = locator.getBuffer("ARRAY_BUFFER", "lyingBuffer");\n        this.lyingElementBuffer = locator.getBuffer("ELEMENT_ARRAY_BUFFER", "lyingBuffer");\n        this.frontProgram = locator.getProgram(\'front\');\n        this.lyingProgram = locator.getProgram(\'lying\');\n        this.initialized = true;\n    }\n    render(amount) {\n        amount++;\n        if (!_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera || !_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.castCenter || !_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.castEdge)\n            return;\n        if (!this.initialized)\n            this.init();\n        const a_color = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.getAttribLocation(this.frontProgram, \'a_color\');\n        const a_position = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.getAttribLocation(this.frontProgram, \'a_position\');\n        const a_height = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.getAttribLocation(this.frontProgram, \'a_height\');\n        const a_texCoord = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.getAttribLocation(this.frontProgram, \'a_texCoord\');\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.clear(_setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.COLOR_BUFFER_BIT | _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.DEPTH_BUFFER_BIT);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.useProgram(this.lyingProgram);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.bindBuffer(_setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.ARRAY_BUFFER, this.lyingBuffer);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.bindBuffer(_setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.ELEMENT_ARRAY_BUFFER, this.lyingElementBuffer);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.disableVertexAttribArray(a_color);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.enableVertexAttribArray(a_position);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.vertexAttribPointer(a_position, 3, _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.FLOAT, false, 4 * Float32Array.BYTES_PER_ELEMENT, 0);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.enableVertexAttribArray(a_height);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.vertexAttribPointer(a_height, 1, _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.FLOAT, false, 4 * Float32Array.BYTES_PER_ELEMENT, 3 * Float32Array.BYTES_PER_ELEMENT);\n        const timeUniform = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.getUniformLocation(this.lyingProgram, \'u_time\');\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.uniform1f(timeUniform, this.chief.world.frame / 10);\n        const cameraPositionUniform = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.getUniformLocation(this.lyingProgram, \'u_cameraPosition\');\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.uniform3f(cameraPositionUniform, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.pos.x, 0, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.pos.y);\n        const cameraAngleUniform = _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.getUniformLocation(this.lyingProgram, \'u_cameraAngle\');\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.uniform1f(cameraAngleUniform, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.castCenter.direction.angle());\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.drawElements(_setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.TRIANGLES, 3 * amount * 4, _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.UNSIGNED_SHORT, 3 * 0 * Uint16Array.BYTES_PER_ELEMENT);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.disableVertexAttribArray(a_height);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.useProgram(this.frontProgram);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.bindBuffer(_setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.ARRAY_BUFFER, this.frontBuffer);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.bindBuffer(_setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.ELEMENT_ARRAY_BUFFER, this.frontElementBuffer);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.vertexAttribPointer(a_position, 3, _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.FLOAT, false, 9 * Float32Array.BYTES_PER_ELEMENT, 0);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.enableVertexAttribArray(a_color);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.vertexAttribPointer(a_color, 4, _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.FLOAT, false, 9 * Float32Array.BYTES_PER_ELEMENT, 3 * Float32Array.BYTES_PER_ELEMENT);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.enableVertexAttribArray(a_texCoord);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.vertexAttribPointer(a_texCoord, 2, _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.FLOAT, false, 9 * Float32Array.BYTES_PER_ELEMENT, 7 * Float32Array.BYTES_PER_ELEMENT);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.drawElements(_setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.TRIANGLES, 3 * amount * 2, _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.UNSIGNED_SHORT, 3 * 0 * Uint16Array.BYTES_PER_ELEMENT);\n        _setUp_webGL_js__WEBPACK_IMPORTED_MODULE_1__.gl.disableVertexAttribArray(a_texCoord);\n    }\n    ;\n}\n;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Renderer);\n//# sourceMappingURL=Renderer.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/Services/SceneRendering/Renderer.js?')},"./lib/Services/SceneRendering/SpaceSearcher.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Service_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Service.js */ "./lib/Services/Service.js");\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === "m") throw new TypeError("Private method is not writable");\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");\n    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");\n    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _SpaceSearcher_chief;\n\nclass SpaceSearcher extends _Service_js__WEBPACK_IMPORTED_MODULE_0__["default"] {\n    constructor(chief) {\n        super();\n        _SpaceSearcher_chief.set(this, void 0);\n        __classPrivateFieldSet(this, _SpaceSearcher_chief, chief, "f");\n    }\n    execute() { }\n    getIndicesOfClosest(camera) {\n        const verticalWalls = __classPrivateFieldGet(this, _SpaceSearcher_chief, "f").world.getCollection(\'VerticalWalls\');\n        const horizontalWalls = __classPrivateFieldGet(this, _SpaceSearcher_chief, "f").world.getCollection(\'HorizontalWalls\');\n        const wallIndices = { horizontal: -1, vertical: -1 };\n        if (verticalWalls.length > 0) {\n            let xPositions = verticalWalls.map((wall) => wall.posX);\n            wallIndices.vertical = this.BinarySearchForClosest(xPositions, camera.pos.x);\n        }\n        if (horizontalWalls.length > 0) {\n            let yPositions = horizontalWalls.map((wall) => wall.posY);\n            wallIndices.horizontal = this.BinarySearchForClosest(yPositions, camera.pos.y);\n        }\n        return wallIndices;\n    }\n    BinarySearchForClosest(arr, value) {\n        if (arr.length <= 0)\n            return -1;\n        let leftIndex = 0;\n        let rightIndex = arr.length - 1;\n        let inBetweenIndex = Math.ceil((leftIndex + rightIndex) / 2);\n        let index = inBetweenIndex;\n        let exec = 0;\n        while (leftIndex < rightIndex && exec < 100) {\n            exec++;\n            if (rightIndex == inBetweenIndex) {\n                index = rightIndex;\n                break;\n            }\n            if (arr[inBetweenIndex] < value) {\n                leftIndex = inBetweenIndex;\n            }\n            else if (arr[inBetweenIndex] > value) {\n                rightIndex = inBetweenIndex;\n                index = rightIndex;\n            }\n            else if (arr[inBetweenIndex] == value) {\n                index = inBetweenIndex;\n                break;\n            }\n            ;\n            inBetweenIndex = Math.ceil((leftIndex + rightIndex) / 2);\n        }\n        while (arr[index] >= value)\n            index--;\n        if (exec >= 100)\n            throw Error(\'Binary Search went out of control\');\n        return index;\n    }\n}\n_SpaceSearcher_chief = new WeakMap();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SpaceSearcher);\n//# sourceMappingURL=SpaceSearcher.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/Services/SceneRendering/SpaceSearcher.js?')},"./lib/Services/Service.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _pluglightjs_World_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../pluglightjs/World.js */ "./vendor/pluglightjs/World.js");\n\nclass Service {\n    constructor() {\n        this.world = new _pluglightjs_World_js__WEBPACK_IMPORTED_MODULE_0__["default"]();\n    }\n    execute() {\n        return false;\n    }\n    init() {\n        return false;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Service);\n//# sourceMappingURL=Service.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/Services/Service.js?')},"./lib/config.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst CONFIG = {\n    resolution: 600,\n    fog: true,\n    fogColor: `${20 * 2},${0 * 2},${0 * 2}`,\n    blurEffect: 0,\n    lightLevel: 40\n};\nvar lightCycle = 1;\nsetInterval(() => {\n    let color = (1 + Math.sin(lightCycle));\n    lightCycle += 0.1;\n}, 10);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CONFIG);\n//# sourceMappingURL=config.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/config.js?')},"./lib/setUp/agentTypes.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _types_HorizontalWall_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types/HorizontalWall.js */ \"./lib/types/HorizontalWall.js\");\n/* harmony import */ var _types_VerticalWall_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types/VerticalWall.js */ \"./lib/types/VerticalWall.js\");\n/* harmony import */ var _types_Ray_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types/Ray.js */ \"./lib/types/Ray.js\");\n/* harmony import */ var _types_Circle_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../types/Circle.js */ \"./lib/types/Circle.js\");\n/* harmony import */ var _types_SceneChunk_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../types/SceneChunk.js */ \"./lib/types/SceneChunk.js\");\n\n\n\n\n\nconst agentTypes = {\n    'HorizontalWall': { 'info': _types_HorizontalWall_js__WEBPACK_IMPORTED_MODULE_0__.horizontalWallPrototype },\n    'VerticalWall': { 'info': _types_VerticalWall_js__WEBPACK_IMPORTED_MODULE_1__.verticalWallPrototype, },\n    'Circle': { 'info': _types_Circle_js__WEBPACK_IMPORTED_MODULE_3__.circlePrototype },\n    'Ray': { 'info': _types_Ray_js__WEBPACK_IMPORTED_MODULE_2__.rayPrototype },\n    'SceneChunk': { 'info': _types_SceneChunk_js__WEBPACK_IMPORTED_MODULE_4__.SceneChunkPrototype }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (agentTypes);\n//# sourceMappingURL=agentTypes.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/setUp/agentTypes.js?")},"./lib/setUp/canvases.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_rendering_CanvasManager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/rendering/CanvasManager.js */ \"./lib/utils/rendering/CanvasManager.js\");\n\n;\nconst canvases = {\n    canvas3d: _utils_rendering_CanvasManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createCanvas({\n        id: 'canvas3d',\n        width: 300 * 2 * 1,\n        height: 170 * 2 * 1,\n        style: {\n            width: '100%',\n            zIndex: 2,\n            background: \"black\",\n            'image-rendering': 'pixelated',\n        }\n    }),\n    background: _utils_rendering_CanvasManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createCanvas({\n        id: 'background',\n        width: 3000 / 4,\n        height: 1700 / 4,\n        style: {\n            zIndex: 1,\n            width: '100%',\n            background: 'linear-gradient(180deg, rgba(125,213,205,1) 0%, rgba(155,100,50,0.9836309523809523) 50%)'\n        }\n    }),\n    front: _utils_rendering_CanvasManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createCanvas({\n        id: 'background',\n        width: 3000 / 4,\n        height: 1700 / 4,\n        style: {\n            zIndex: 3,\n            width: '100%',\n            background: \"radial-gradient(circle, rgba(0, 217, 255, 0.1) 0%, rgba(0, 255, 242, 0.2) 100%)\"\n        }\n    }),\n    canvas2d: _utils_rendering_CanvasManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createCanvas({\n        id: 'canvas2d',\n        width: 100,\n        height: 100,\n        style: {\n            zIndex: 3,\n            position: 'absolute',\n            borderRadius: '50%',\n            top: '5px',\n            right: '5px',\n            width: '20%',\n            height: 'auto',\n            opacity: '0.7',\n            'image-rendering': 'pixelated'\n        }\n    })\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (canvases);\n//# sourceMappingURL=canvases.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/setUp/canvases.js?")},"./lib/setUp/collections.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst collections = ['HorizontalWalls', 'VerticalWalls', 'Circles'];\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (collections);\n//# sourceMappingURL=collections.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/setUp/collections.js?")},"./lib/setUp/events.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst events = {\n    'keypressed': ['RayCastProcessor']\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (events);\n//# sourceMappingURL=events.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/setUp/events.js?")},"./lib/setUp/images.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_rendering_ImageLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/rendering/ImageLoader.js */ "./lib/utils/rendering/ImageLoader.js");\n\nconst loader = new _utils_rendering_ImageLoader_js__WEBPACK_IMPORTED_MODULE_0__["default"]();\nloader.load(\'bricks\', \'backBricks.png\');\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (loader);\n//# sourceMappingURL=images.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/setUp/images.js?')},"./lib/setUp/services.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Services_Camera_CameraMover_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Services/Camera/CameraMover.js */ "./lib/Services/Camera/CameraMover.js");\n/* harmony import */ var _Services_Camera_InputHandler_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Services/Camera/InputHandler.js */ "./lib/Services/Camera/InputHandler.js");\n/* harmony import */ var _Services_SceneRendering_Orchestrator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Services/SceneRendering/Orchestrator.js */ "./lib/Services/SceneRendering/Orchestrator.js");\n/* harmony import */ var _Services_2DRendering_SceneRenderer2D_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Services/2DRendering/SceneRenderer2D.js */ "./lib/Services/2DRendering/SceneRenderer2D.js");\n/* harmony import */ var _canvases_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./canvases.js */ "./lib/setUp/canvases.js");\n\n\n\n\n\nconst services = {\n    \'SceneRenderer2D\': new _Services_2DRendering_SceneRenderer2D_js__WEBPACK_IMPORTED_MODULE_3__["default"](_canvases_js__WEBPACK_IMPORTED_MODULE_4__["default"].canvas2d),\n    \'SceneRendering\': new _Services_SceneRendering_Orchestrator_js__WEBPACK_IMPORTED_MODULE_2__["default"](),\n    \'CameraMover\': new _Services_Camera_CameraMover_js__WEBPACK_IMPORTED_MODULE_0__["default"](),\n    \'InputHandler\': new _Services_Camera_InputHandler_js__WEBPACK_IMPORTED_MODULE_1__["default"]()\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (services);\n//# sourceMappingURL=services.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/setUp/services.js?')},"./lib/setUp/setUp.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appSetUp: () => (/* binding */ appSetUp)\n/* harmony export */ });\n/* harmony import */ var _agentTypes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./agentTypes.js */ "./lib/setUp/agentTypes.js");\n/* harmony import */ var _collections_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collections.js */ "./lib/setUp/collections.js");\n/* harmony import */ var _services_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./services.js */ "./lib/setUp/services.js");\n/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./events.js */ "./lib/setUp/events.js");\n\n\n\n\n;\nconst appSetUp = {\n    "agentTypes": _agentTypes_js__WEBPACK_IMPORTED_MODULE_0__["default"],\n    "collections": _collections_js__WEBPACK_IMPORTED_MODULE_1__["default"],\n    "services": _services_js__WEBPACK_IMPORTED_MODULE_2__["default"],\n    "events": _events_js__WEBPACK_IMPORTED_MODULE_3__["default"]\n};\n\n//# sourceMappingURL=setUp.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/setUp/setUp.js?')},"./lib/setUp/webGL.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   gl: () => (/* binding */ gl),\n/* harmony export */   locatorPromise: () => (/* binding */ locatorPromise)\n/* harmony export */ });\n/* harmony import */ var _utils_rendering_LocatorGL_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/rendering/LocatorGL.js */ "./lib/utils/rendering/LocatorGL.js");\n/* harmony import */ var _utils_rendering_BuilderGL_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/rendering/BuilderGL.js */ "./lib/utils/rendering/BuilderGL.js");\n/* harmony import */ var _canvases_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./canvases.js */ "./lib/setUp/canvases.js");\n/* harmony import */ var _images_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./images.js */ "./lib/setUp/images.js");\n\n\n\n\nconst canvas = _canvases_js__WEBPACK_IMPORTED_MODULE_2__["default"].canvas3d;\nconst gl = canvas.getContext("webgl2");\nconst locatorPromise = new Promise(async (resolve, reject) => {\n    const _locator = new _utils_rendering_LocatorGL_js__WEBPACK_IMPORTED_MODULE_0__["default"]();\n    console.log("%cPreparing WebGL...", "color: skyblue");\n    console.log(\'\\x1b[36m\', "building shaders...");\n    const rectangleVertexShader = await _utils_rendering_BuilderGL_js__WEBPACK_IMPORTED_MODULE_1__["default"].buildShader(gl, "VERTEX_SHADER", "./shaders/rect.vert");\n    const frontFragmentShader = await _utils_rendering_BuilderGL_js__WEBPACK_IMPORTED_MODULE_1__["default"].buildShader(gl, "FRAGMENT_SHADER", "./shaders/front.frag");\n    const lyingFragmentShader = await _utils_rendering_BuilderGL_js__WEBPACK_IMPORTED_MODULE_1__["default"].buildShader(gl, "FRAGMENT_SHADER", "./shaders/lying.frag");\n    console.log("\\n\\n");\n    console.log("%c[WebGL DEBUG]: shaders\' status", "color : skyblue");\n    console.table({\n        rectangleVertexShader,\n        frontFragmentShader,\n        lyingFragmentShader\n    });\n    if (!rectangleVertexShader ||\n        !frontFragmentShader ||\n        !lyingFragmentShader)\n        return reject("There was an error at building shaders");\n    console.log(\'\\x1b[36m\', "building programs...");\n    const frontProgram = _utils_rendering_BuilderGL_js__WEBPACK_IMPORTED_MODULE_1__["default"].buildProgram(gl, rectangleVertexShader, frontFragmentShader);\n    const lyingProgram = _utils_rendering_BuilderGL_js__WEBPACK_IMPORTED_MODULE_1__["default"].buildProgram(gl, rectangleVertexShader, lyingFragmentShader);\n    console.log("\\n\\n");\n    console.log("%c[WebGL DEBUG]: programs\' status", "color : skyblue");\n    console.table({\n        frontProgram,\n        lyingProgram\n    });\n    if (!frontProgram || !lyingProgram)\n        return reject("There was an error at building programs");\n    console.log(\'\\x1b[36m\', "allocating programs...");\n    _locator.registerProgram("front", frontProgram);\n    _locator.registerProgram("lying", lyingProgram);\n    console.log(\'\\x1b[36m\', "creating buffers...");\n    gl.useProgram(frontProgram);\n    const frontBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, frontBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(3000 * 5 * 8), gl.DYNAMIC_DRAW);\n    const frontElementBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, frontElementBuffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(3000 * 3 * 4), gl.DYNAMIC_DRAW);\n    gl.useProgram(lyingProgram);\n    const lyingBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, lyingBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(3000 * 3 * 16), gl.DYNAMIC_DRAW);\n    const lyingElementBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, lyingElementBuffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(3000 * 3 * 8), gl.DYNAMIC_DRAW);\n    if (!frontBuffer ||\n        !frontElementBuffer ||\n        !lyingBuffer ||\n        !lyingElementBuffer)\n        return reject("There was an error at creating buffers");\n    console.log(\'\\x1b[36m\', "allocating buffers...");\n    _locator.registerBuffer(frontBuffer, "ARRAY_BUFFER", "frontBuffer");\n    _locator.registerBuffer(frontElementBuffer, "ELEMENT_ARRAY_BUFFER", "frontBuffer");\n    _locator.registerBuffer(lyingBuffer, "ARRAY_BUFFER", "lyingBuffer");\n    _locator.registerBuffer(lyingElementBuffer, "ELEMENT_ARRAY_BUFFER", "lyingBuffer");\n    console.log("\\n\\n");\n    console.log("%cWebGL was prepared successfully!", "color: lawngreen; background:black");\n    gl.enable(gl.DEPTH_TEST);\n    gl.depthFunc(gl.ALWAYS);\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n    const texture = gl.createTexture();\n    const bricks = _images_js__WEBPACK_IMPORTED_MODULE_3__["default"].get("bricks");\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, bricks);\n    return resolve(_locator);\n});\n\n//# sourceMappingURL=webGL.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/setUp/webGL.js?')},"./lib/types/Circle.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   circlePrototype: () => (/* binding */ circlePrototype)\n/* harmony export */ });\n/* harmony import */ var _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n\n;\nconst circlePrototype = {\n    center: new _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](0, 0),\n    radius: 1,\n    color: \'255,0,0\',\n    opacity: 1\n};\n\n//# sourceMappingURL=Circle.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/types/Circle.js?')},"./lib/types/HorizontalWall.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   horizontalWallPrototype: () => (/* binding */ horizontalWallPrototype)\n/* harmony export */ });\nconst horizontalWallPrototype = {\n    color: 'white',\n    startX: NaN,\n    endX: NaN,\n    posY: NaN,\n    opacity: 1\n};\n\n//# sourceMappingURL=HorizontalWall.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/types/HorizontalWall.js?")},"./lib/types/Ray.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   rayPrototype: () => (/* binding */ rayPrototype)\n/* harmony export */ });\n/* harmony import */ var _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n\nconst rayPrototype = {\n    active: true,\n    lambda: NaN,\n    source: new _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](NaN, NaN),\n    direction: new _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](NaN, NaN),\n    reflected: undefined,\n    level: 1,\n    collidesWith: undefined,\n    collidesAt: (new _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](NaN, NaN)),\n};\n\n//# sourceMappingURL=Ray.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/types/Ray.js?')},"./lib/types/SceneChunk.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SceneChunkPrototype: () => (/* binding */ SceneChunkPrototype)\n/* harmony export */ });\n/* harmony import */ var _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n\nconst SceneChunkPrototype = {\n    leftTop: { x: NaN, y: NaN },\n    size: { x: NaN, y: NaN },\n    distance: NaN,\n    point: new _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](NaN, NaN),\n    item: null\n};\n\n//# sourceMappingURL=SceneChunk.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/types/SceneChunk.js?')},"./lib/types/VerticalWall.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   verticalWallPrototype: () => (/* binding */ verticalWallPrototype)\n/* harmony export */ });\nconst verticalWallPrototype = {\n    color: 'white',\n    startY: NaN,\n    endY: NaN,\n    posX: NaN,\n    opacity: 1\n};\n\n//# sourceMappingURL=VerticalWall.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/types/VerticalWall.js?")},"./lib/utils/physics/CollisionDetector.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n\nclass CollisionDetector {\n    static RayVsVerticalLine(ray, x) {\n        const lambda = (x - ray.source.x) / ray.direction.x;\n        return lambda > 0 ? lambda : false;\n    }\n    static RayVsVerticalWall(ray, wall) {\n        const lambda = CollisionDetector.RayVsVerticalLine(ray, wall.posX);\n        if (!lambda)\n            return false;\n        const point = _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].add(ray.source, _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].scale(ray.direction, lambda));\n        return (point.y >= wall.startY && point.y <= wall.endY) ? point : false;\n    }\n    static RayVsHorizontalLine(ray, y) {\n        const lambda = (y - ray.source.y) / ray.direction.y;\n        return lambda > 0 ? lambda : false;\n    }\n    static RayVsHorizontalWall(ray, wall) {\n        const lambda = CollisionDetector.RayVsHorizontalLine(ray, wall.posY);\n        if (!lambda)\n            return false;\n        const point = _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].add(ray.source, _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].scale(ray.direction, lambda));\n        return (point.x >= wall.startX && point.x <= wall.endX) ? point : false;\n    }\n    static RayVsCircle(ray, circle) {\n        if (circle.radius <= 0)\n            throw Error("Invalid circle radius: it must be a positive number");\n        let rayOrigin = ray.source;\n        let OC = _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].sub(circle.center, rayOrigin);\n        let rayDirection = _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].normalize(ray.direction);\n        let OAmag = _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].dot(rayDirection, OC);\n        let CAmagSq = OC.magSq() - OAmag * OAmag;\n        let BAmag = Math.sqrt(circle.radius * circle.radius - CAmagSq);\n        let lambda = OAmag - BAmag;\n        if (!lambda || lambda <= 0)\n            return false;\n        let RayToCircle = rayDirection.scale(lambda);\n        let point = _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].add(rayOrigin, RayToCircle);\n        return { point, lambda };\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CollisionDetector);\n//# sourceMappingURL=CollisionDetector.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/utils/physics/CollisionDetector.js?')},"./lib/utils/physics/Vector2D.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass Vector2D {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    }\n    static copy(v) {\n        return new Vector2D(v.x, v.y);\n    }\n    add(v) {\n        this.x += v.x;\n        this.y += v.y;\n        return this;\n    }\n    static add(v1, v2) {\n        return new Vector2D(v1.x + v2.x, v1.y + v2.y);\n    }\n    sub(v) {\n        this.x -= v.x;\n        this.y -= v.y;\n        return this;\n    }\n    static sub(v1, v2) {\n        return new Vector2D(v1.x - v2.x, v1.y - v2.y);\n    }\n    div(v) {\n        this.x /= v.x;\n        this.y /= v.y;\n        return this;\n    }\n    static div(v1, v2) {\n        return new Vector2D(v1.x / v2.x, v1.y / v2.y);\n    }\n    mult(v) {\n        this.x *= v.x;\n        this.y *= v.y;\n        return this;\n    }\n    static mult(v1, v2) {\n        return new Vector2D(v1.x * v2.x, v1.y * v2.y);\n    }\n    abs() {\n        this.x = Math.abs(this.x);\n        this.y = Math.abs(this.y);\n        return this;\n    }\n    static abs(v) {\n        return new Vector2D(Math.abs(v.x), Math.abs(v.y));\n    }\n    dot(v) {\n        return (this.x * v.x) + (this.y * v.y);\n    }\n    static dot(v1, v2) {\n        return (v1.x * v2.x) + (v1.y * v2.y);\n    }\n    magSq() {\n        return (this.x * this.x) + (this.y * this.y);\n    }\n    static magSq(v) {\n        return (v.x * v.x) + (v.y * v.y);\n    }\n    mag() {\n        return Math.sqrt(this.magSq());\n    }\n    static mag(v) {\n        return Math.sqrt(Vector2D.magSq(v));\n    }\n    scale(s) {\n        this.x *= s;\n        this.y *= s;\n        return this;\n    }\n    static scale(v, s) {\n        return new Vector2D(v.x * s, v.y * s);\n    }\n    normalize() {\n        let mag = this.mag();\n        this.x /= mag;\n        this.y /= mag;\n        return this;\n    }\n    angle() {\n        let angle = Math.atan2(this.y, this.x);\n        if (angle < 0) {\n            angle += 2 * Math.PI;\n        }\n        return angle;\n    }\n    static rotate(v, center, deg) {\n        deg *= Math.PI / 180;\n        v = Vector2D.sub(v, center);\n        return Vector2D.add({\n            x: v.dot({ x: Math.cos(deg), y: -Math.sin(deg) }),\n            y: v.dot({ x: Math.sin(deg), y: Math.cos(deg) })\n        }, center);\n    }\n    complexRotate(w) {\n        const temp = this.x;\n        this.x = this.x * w[0] - this.y * w[1];\n        this.y = temp * w[1] + this.y * w[0];\n        return this;\n    }\n    static complexRotate(v, w) {\n        return new Vector2D(v.x * w[0] - v.y * w[1], v.x * w[1] + v.y * w[0]);\n    }\n    ;\n    static normalize(v) {\n        let mag = Vector2D.mag(v);\n        return new Vector2D(v.x / mag, v.y / mag);\n    }\n    static between(v1, v2, percentil) {\n        return new Vector2D(v1.x + (v2.x - v1.x) * percentil, v1.y + (v2.y - v1.y) * percentil);\n    }\n    static perpendicular(v) {\n        return new Vector2D(-1 * v.y, -1 * v.x);\n    }\n    static angleBetween(v1, v2) {\n        let normalizedDotProduct = Vector2D.dot(v1, v2) / (v1.mag() * v2.mag());\n        return Math.acos(Math.min(normalizedDotProduct, 1));\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Vector2D);\n//# sourceMappingURL=Vector2D.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/utils/physics/Vector2D.js?')},"./lib/utils/rendering/BuilderGL.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass BuilderGL {\n    static async loadShaderSource(url) {\n        console.info('Loading shader source', url);\n        const res = await fetch(url);\n        return res.text();\n    }\n    static async buildShader(gl, type, url) {\n        if (!(gl instanceof WebGL2RenderingContext))\n            throw Error(\"The 'gl' parameter must be an instance of 'WebGL2RenderingContext'\");\n        const shaderTypes = {\n            \"FRAGMENT_SHADER\": gl.FRAGMENT_SHADER,\n            \"VERTEX_SHADER\": gl.VERTEX_SHADER\n        };\n        const _type = shaderTypes[type];\n        if (_type === undefined)\n            throw Error(`Invalid shader type '${type}'; the type must be either  FRAGMENT_SHADER or VERTEX_SHADER`);\n        if (typeof url !== 'string' || url == \"\")\n            throw Error(\"Invalid 'url' argument: it must be a non-empty string\");\n        const source = await this.loadShaderSource(url);\n        const shader = gl.createShader(_type);\n        if (!source || !shader)\n            return;\n        gl.shaderSource(shader, source);\n        gl.compileShader(shader);\n        const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n        if (success)\n            return shader;\n    }\n    ;\n    static buildProgram(gl, vertexShader, fragmentShader) {\n        if (!(gl instanceof WebGL2RenderingContext))\n            throw Error(\"The 'gl' parameter must be an instance of 'WebGL2RenderingContext'\");\n        if (!(vertexShader instanceof WebGLShader))\n            throw Error(\"Invalid vertex shader: it must be an instance of 'WebGLShader'\");\n        if (!(fragmentShader instanceof WebGLShader))\n            throw Error(\"Invalid fragment shader: it must be an instance of 'WebGLShader'\");\n        var program;\n        program = gl.createProgram();\n        gl.attachShader(program, vertexShader);\n        gl.attachShader(program, fragmentShader);\n        gl.linkProgram(program);\n        const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n        if (success)\n            return program;\n        gl.deleteProgram(program);\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BuilderGL);\n//# sourceMappingURL=BuilderGL.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/utils/rendering/BuilderGL.js?")},"./lib/utils/rendering/CanvasManager.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass CanvasManager {\n    constructor() {\n        this.canvases = new Map();\n    }\n    createCanvas(details) {\n        const canvasContainer = document.querySelector('.canvasContainer');\n        const canvas = document.createElement('canvas');\n        if (document.getElementById(details.id) !== null || this.canvases.get(details.id) !== undefined) {\n            console.warn(`Violation: unexpectedly, an element already exists having the id '${details.id}' the canvas is supposed to adquire`);\n        }\n        canvas.id = details.id;\n        canvas.width = details.width;\n        canvas.height = details.height;\n        canvas.style.position = 'absolute';\n        if (details.style === null)\n            return canvas;\n        for (let property in details.style) {\n            canvas.style[property] = details.style[property];\n        }\n        if (canvasContainer === null) {\n            document.body.appendChild(canvas);\n            console.warn(\"You must define a <div> container with the id 'canvasContainer'; the canvas will be allocated at the root element '<body>' because the container was not defined \");\n        }\n        else\n            canvasContainer.appendChild(canvas);\n        this.canvases.set(canvas.id, canvas);\n        return canvas;\n    }\n    deleteCanvas(canvas) {\n        const canvasID = canvas.id;\n        this.canvases.delete(canvasID);\n        const canvasContainer = document.querySelector('.canvasContainer');\n        if (canvasContainer === null)\n            return;\n        canvasContainer.removeChild(canvas);\n    }\n    getCanvas(canvasID) {\n        const canvas = this.canvases.get(canvasID);\n        return canvas !== undefined ? canvas : false;\n    }\n}\nconst instance = new CanvasManager();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (instance);\n//# sourceMappingURL=CanvasManager.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/utils/rendering/CanvasManager.js?")},"./lib/utils/rendering/ImageLoader.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");\n    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _ImageLoader_textures;\nclass ImageLoader {\n    constructor() {\n        _ImageLoader_textures.set(this, new Map());\n    }\n    load(name, src) {\n        if (typeof name !== \'string\' || !name) {\n            throw Error(`Invalid texture name given, it must be a non-empty string`);\n        }\n        if (__classPrivateFieldGet(this, _ImageLoader_textures, "f").get(name))\n            throw Error(`Cannot add texture with name \'${name}\'; the name has already been registered`);\n        try {\n            const image = new Image();\n            image.src = \'./assets/textures/\' + src;\n            __classPrivateFieldGet(this, _ImageLoader_textures, "f").set(name, image);\n        }\n        catch (err) {\n            throw Error(`The image with source \'/img/textures/${src}\' could not be found`);\n        }\n        return true;\n    }\n    remove(name) {\n        return __classPrivateFieldGet(this, _ImageLoader_textures, "f").delete(name);\n    }\n    get(name) {\n        const texture = __classPrivateFieldGet(this, _ImageLoader_textures, "f").get(name);\n        return texture ? texture : false;\n    }\n}\n_ImageLoader_textures = new WeakMap();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ImageLoader);\n//# sourceMappingURL=ImageLoader.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/utils/rendering/ImageLoader.js?')},"./lib/utils/rendering/LocatorGL.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass LocatorGL {\n    constructor() {\n        this.arrayBuffers = new Map();\n        this.elementArrayBuffers = new Map();\n        this.programs = new Map();\n    }\n    __mapTypeToBufferLocation__(type) {\n        const types = {\n            "ARRAY_BUFFER": this.arrayBuffers,\n            "ELEMENT_ARRAY_BUFFER": this.elementArrayBuffers\n        };\n        const location = types[type];\n        if (!location)\n            throw Error("Could not get buffer location: invalid buffer type");\n        return location;\n    }\n    registerBuffer(buffer, type, name) {\n        if (!(buffer instanceof WebGLBuffer))\n            throw Error("Invalid buffer: it must be an instance of \'WebGLBuffer\'");\n        const location = this.__mapTypeToBufferLocation__(type);\n        if (!location)\n            return;\n        if (typeof name !== "string" || !name)\n            throw Error("Invalid name: it must be a  non-empty string");\n        const exists = location.get(name);\n        if (exists)\n            throw Error(`Could not register buffer \'${name}\' as a buffer of type \'${type}\' because it already exists`);\n        location.set(name, buffer);\n        return true;\n    }\n    registerProgram(name, program) {\n        if (typeof name !== "string" || !name)\n            throw Error("Invalid name: it must be a  non-empty string");\n        if (!(program instanceof WebGLProgram))\n            throw Error("Invalid program: it must be an instance of \'WebGLProgram\'");\n        if (this.programs.get(name))\n            throw Error(`Could not register program \'${name}\' because it already exists`);\n        this.programs.set(name, program);\n        return true;\n    }\n    getBuffer(type, name) {\n        const location = this.__mapTypeToBufferLocation__(type);\n        if (!location)\n            return false;\n        const buffer = location.get(name);\n        return buffer ? buffer : false;\n    }\n    ;\n    getProgram(name) {\n        const program = this.programs.get(name);\n        if (!program)\n            return false;\n        return program;\n    }\n    ;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (LocatorGL);\n//# sourceMappingURL=LocatorGL.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/utils/rendering/LocatorGL.js?')},"./lib/utils/scene/Camera.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Camera: () => (/* binding */ Camera),\n/* harmony export */   camera: () => (/* binding */ camera)\n/* harmony export */ });\n/* harmony import */ var _physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n\nclass Camera {\n    constructor() {\n        this.initialized = false;\n        this.wallIndices = { horizontal: NaN, vertical: NaN };\n        this.FOV = NaN;\n        this.pos = new _physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](NaN, NaN);\n    }\n    ;\n    init(app, info) {\n        var { x, y, fov, dx, dy } = info;\n        this.FOV = fov;\n        this.pos = new _physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](x, y);\n        if (this.initialized) {\n            console.warn("Attempted to initialize an already initialized instance of \'Camera\'");\n            return false;\n        }\n        camera.castCenter = app.createAgent(\'Ray\', {\n            info: {\n                source: camera.pos,\n                direction: _physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].normalize(new _physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](dx, dy))\n            }\n        });\n        camera.castEdge = app.createAgent(\'Ray\', {\n            info: {\n                source: camera.pos,\n                direction: _physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].complexRotate(_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].normalize(new _physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](dx, dy)), [Math.cos(camera.FOV * Math.PI / 360), Math.sin(camera.FOV * Math.PI / 360)])\n            }\n        });\n        return this.initialized = true;\n    }\n}\n;\nconst camera = new Camera();\n\n//# sourceMappingURL=Camera.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/utils/scene/Camera.js?')},"./lib/utils/scene/SceneBuilder.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass SceneBuilder {\n    constructor(app) {\n        this.app = app;\n    }\n    build(scene) {\n        var horizontal = [];\n        var vertical = [];\n        var circles = [];\n        scene.forEach((element) => {\n            if (element.type == \"Wall\") {\n                let segment = element.info;\n                let vertexA = segment[0];\n                let vertexB = segment[1];\n                if (vertexA[0] == vertexB[0] && vertexA[1] != vertexB[1]) {\n                    vertical.push(this.buildVerticalWall(vertexA, vertexB, segment[2], segment[3]));\n                }\n                else if (vertexA[1] == vertexB[1] && vertexA[0] != vertexB[0]) {\n                    horizontal.push(this.buildHorizontalWall(vertexA, vertexB, segment[2], segment[3]));\n                }\n                else {\n                    console.warn(`Invalid vertex pair given: the vertices must be different and colinear`);\n                }\n            }\n            else if (element.type == 'Circle') {\n                let info = element.info;\n                circles.push(this.buildCircle(...info));\n            }\n        });\n        horizontal.sort((a, b) => { return a.posY - b.posY; });\n        vertical.sort((a, b) => { return a.posX - b.posX; });\n        horizontal.forEach(wall => { this.app.addToCollection('HorizontalWalls', wall); });\n        vertical.forEach(wall => { this.app.addToCollection('VerticalWalls', wall); });\n        circles.forEach(circle => { this.app.addToCollection('Circles', circle); });\n    }\n    buildHorizontalWall(vertexA, vertexB, opacity, color) {\n        let wall = this.app.createAgent('HorizontalWall', {\n            info: {\n                startX: Math.min(vertexA[0], vertexB[0]),\n                endX: Math.max(vertexA[0], vertexB[0]),\n                posY: vertexA[1],\n                opacity: opacity || 1,\n                color: color || 'white'\n            }\n        });\n        return wall;\n    }\n    ;\n    buildVerticalWall(vertexA, vertexB, opacity, color) {\n        let wall = this.app.createAgent('VerticalWall', {\n            info: {\n                startY: Math.min(vertexA[1], vertexB[1]),\n                endY: Math.max(vertexA[1], vertexB[1]),\n                posX: vertexA[0],\n                opacity: opacity || 1,\n                color: color || 'white'\n            }\n        });\n        return wall;\n    }\n    ;\n    buildCircle(...args) {\n        let circle = this.app.createAgent('Circle', {\n            info: {\n                radius: args[1],\n                center: args[0],\n                opacity: args[2],\n                color: args[3]\n            }\n        });\n        return circle;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SceneBuilder);\n//# sourceMappingURL=SceneBuilder.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/utils/scene/SceneBuilder.js?")},"./vendor/pluglightjs/AgentPool.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass AgentPool{\n\n    #types;\n    #pools;\n    #Agent;\n    #nextID;\n\n    constructor(world){\n        this.world = world;\n        this.#types = {} // Type Object Pattern\n        this.#pools = {} // Object Pool Pattern\n        this.toBeRemoved = [];\n        this.#nextID = 0;\n        \n        this.#Agent = class Agent{\n\n            #type;\n            #collections;\n            #ID;\n\n            constructor(typeName,prototype, ID){\n\n                this._children = {};\n                this.#collections = {};\n                this.#type = typeName;\n                this.#ID   = ID;\n\n                if(prototype['info']){\n\n                    Object.keys(prototype['info']).forEach((field) => {\n                        let _field =  prototype['info'][field];\n\n                        if(typeof _field == 'object'){\n                            this[field] = Object.assign({},_field); \n                        }\n                        else{\n                            this[field] = _field;\n                        }\n                    });\n                }\n            }\n\n            getID(){\n                return this.#ID;\n            }\n\n            getType(){\n                return this.#type;\n            }\n\n            isInCollection(collectionName){\n                return this.#collections[collectionName];\n            }\n\n            getCollections(){\n                return Object.keys(this.#collections);\n            }\n\n            addCollection(collectionName){\n                this.#collections[collectionName] = 1;\n            }\n            removeCollection(collectionName){\n                delete this.#collections[collectionName];\n            }\n            reset(prototype, newID){\n\n                this.#ID = newID;\n\n                Object.keys(prototype['info']).forEach((field) => {\n                    let _field =  prototype['info'][field];\n                        if(typeof _field == 'object'){\n                        this[field] = Object.assign({},_field); \n                    }\n                    else{\n                        this[field] = _field;\n                    }\n                });\n            }\n        }\n    }\n\n    registerType(typeName,prototype){\n\n        // Defensive input check\n\n        if(typeof typeName !== 'string' || typeName == ''){\n            console.error(`Cannot create agentType with a type name defined as: ${typeName}; the type must be a non-empty string`);\n            return false;\n        }   \n\n        if(this.#types[typeName] != undefined){\n            console.error(`The type named '${typeName}' has already been registered`);\n            return false;\n        }\n\n        if(prototype == undefined){\n            console.error('Prototype cannot be undefined, it must be a JSON with the attributes of the agent')\n            return false;\n        }\n\n        //\n\n        this.#types[typeName] = prototype;\n        this.#pools[typeName] = [];\n\n        return true;\n    }\n\n\n    createAgent(typeName,details = undefined){\n\n        // Defensive input check\n\n        if(typeof typeName !== 'string' || typeName == ''){\n            console.error(`Cannot create agent with a type defined as: ${typeName}; the type must be a non-empty string`);\n            return false;\n        }   \n\n        if(!this.#types[typeName]){\n            console.error(`Cannot create agent with a type defined as: ${typeName}; the type doesn't exist at AgentPool`);\n            return false;\n        }\n\n        if(details != undefined && typeof details  !== 'object'){\n            console.error(`'details' must be an object`);\n            return false;\n        }\n\n        //\n        \n        var world = this.world;\n        var agent;\n        \n        if(this.#pools[typeName].length > 0){\n            agent = this.#pools[typeName].pop();\n            this.resetAgent(agent);\n        }\n        else{\n            agent = new this.#Agent(typeName,this.#types[typeName],this.#nextID++);\n        }\n\n        if(!(details && details['info'])) return agent;\n        \n        Object.keys(details['info']).forEach((detail) => {\n\n            if(details['info'][detail] != undefined){\n                agent[detail] = details['info'][detail];\n            }\n        })\n\n        // Defensive output type check\n\n        if(!(agent instanceof this.#Agent)){\n            console.error(`Something went wrong when creating a new Agent of type ${typeName}`);\n            return false;\n        }\n\n        return agent;\n    }\n\n    getCollectionsOfType(typeName){\n\n        if(!this.#types[typeName]){\n            console.warn(`Cannot get collections from unexisting type '${typename}'`);\n            return false;\n        }\n\n        let collections = this.#types[typeName].collections || [];\n\n        return collections;\n    }\n\n    storeToBeRemoved(agent){\n        this.toBeRemoved.push(agent);\n    }\n\n    removeAgent(agent){\n        try{\n\n            let agentType = agent.getType();\n            let agentCollections = agent.getCollections();\n            \n            agentCollections.forEach((collectionName) => {\n                this.world.removeFromCollection(collectionName,agent);\n            });\n            \n            let agentChildren = Object.keys(agent._children);\n            \n            while(agentChildren.length){\n                this.removeAgent(agent._children[agentChildren[0]]);\n                delete agent._children[agentChildren[0]];\n                agentChildren.shift();\n            }\n\n            this.#pools[agentType].push(agent);\n\n        }catch(err){\n            console.error(`Error, agent ${agent}`);\n            return false;\n        }\n    }\n\n    removeAgents(){\n\n        while(this.toBeRemoved.length){\n            let agent = this.toBeRemoved.pop();\n            this.removeAgent(agent);\n        }\n    }\n\n    resetAgent(agent){\n        let prototype = this.#types[agent.getType()];\n        agent.reset(prototype, this.#nextID++);\n    }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AgentPool);\n\n//# sourceURL=webpack://typescript-practice/./vendor/pluglightjs/AgentPool.js?")},"./vendor/pluglightjs/CollectionManager.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass CollectionManager {\n\n    #collections;\n\n    constructor(world){\n        this.world = world;\n        this.#collections = {};\n        this.toBeRemoved  = [];\n        this._objectPool   = []; // Only for internal use\n    }\n\n    registerCollection(name){\n\n        // Defensive input check\n\n        if(typeof name !== 'string' || name == ''){\n            console.error(`Cannot register collection with a name defined as: ${typeName}; the name must be a non-empty string`);\n            return false;\n        }   \n\n        if(this.#collections[name]){\n            console.error(`Collection named '${name}' already registered`);\n            return false;\n        }\n\n        //\n\n        this.#collections[name] = [];\n        return this;collection\n    }\n\n    getCollection(collectionName){\n\n        if(this.#collections[collectionName]){\n            return this.#collections[collectionName];\n        }\n\n        throw Error(`Cannot get unregistered collection '${collectionName}'`);\n\n    }\n\n    addToCollection(collectionName,object = undefined){\n\n        // Defensive input check \n\n        if(!this.#collections[collectionName]){\n            console.error(`collection named '${collectionName} is not registered'`);\n            return false;\n        }\n\n        if(typeof object != 'object' || !object.isInCollection || !object.addCollection ){\n            console.error(`The value passed as 'agent' is not a valid Agent object ${collectionName}`);\n            return false;\n        }\n       \n        if(object.isInCollection && object.isInCollection(collectionName)){\n            console.error(`The agent is already registered to collection ${collectionName}`);\n            return false;\n        }\n\n        //\n\n        this.#collections[collectionName].push(object);\n        object.addCollection(collectionName);\n\n        return true;\n    }\n\n    cacheToBeRemoved(collectionName,agent){\n\n        var data;\n\n        if(this._objectPool.length > 0){\n            data = this._objectPool.pop();\n            data.collectionName = collectionName;\n            data.agent = agent;\n\n            this.toBeRemoved.push(data);\n        }\n        else{\n            this.toBeRemoved.push({\n                collectionName : collectionName,\n                agent : agent\n            });\n        }\n    }\n\n    removeFromCollection(collectionName,object){\n\n        let index = this.#collections[collectionName].indexOf(object);\n        this.#collections[collectionName].splice(index,1);\n        object.removeCollection(collectionName);\n    }\n\n    removeAgentsFromCollections(){\n\n        while(this.toBeRemoved.length > 0){\n            let command = this.toBeRemoved.pop();\n            this.removeFromCollection(command.collectionName,command.agent);\n\n            command.collectionName = undefined;\n            command.agent = undefined;\n\n            this._objectPool.push(command);\n        }\n    }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CollectionManager);\n\n//# sourceURL=webpack://typescript-practice/./vendor/pluglightjs/CollectionManager.js?")},"./vendor/pluglightjs/EventManager.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass EventManager{\n\n    constructor(world){\n        this.world  = world;\n        this.events = {};\n    }\n\n    registerEvent(eventName){\n\n        if(this.events[eventName]){\n            console.warn(`Event named '${eventName} has already been registered'`);\n            return false;\n        }\n\n        this.events[eventName] = {};\n    }\n\n    registerServiceToEvent(serviceName,eventName){\n\n        if(!this.events[eventName]){\n            console.warn(`Cannot register service '${serviceName}' to unregistered event '${eventName}'`);\n            return false;\n        }\n\n        var service = this.world.getService(serviceName)\n\n        if(!service){\n            console.warn(`Cannot register service '${serviceName}' to event, because the service is not registered to the framework`);\n            return false;\n        }\n\n        if(typeof service[`on${eventName}`] != 'function'){\n            console.warn(`Cannot register service '${serviceName}' to event, because the service does not have a method 'on${eventName}'`);\n            return false;\n        }\n\n        this.events[eventName][serviceName] = service;\n    }\n\n    notifyToServices(eventName, details = undefined){\n\n        if(!this.events[eventName]){\n            console.warn(`Cannot notify event '${eventName}' because it does not exist`);\n            return false;\n        }\n\n        var services = Object.keys(this.events[eventName]);\n\n        services.forEach((serviceName) => { \n            this.world.getService(serviceName)[`on${eventName}`](details);\n        });\n    }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EventManager);\n\n//# sourceURL=webpack://typescript-practice/./vendor/pluglightjs/EventManager.js?")},"./vendor/pluglightjs/ServiceManager.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass ServiceManager {\n\n    #services;\n\n    constructor(world){\n        this.world = world;\n        this.#services = {};\n    }\n\n    registerService(name,service){\n\n        // Defensive input check\n\n        if(typeof name !== 'string' || name == ''){\n            console.error(`Cannot register service with a name defined as: ${typeName}; the name must be a non-empty string`);\n            return false;\n        }   \n\n        if(this.#services[name]){\n            console.error(`Service named '${name}' already registered`);\n            return false;\n        }\n\n        if(!service || service == null){\n            console.error(`Cannot register invalid or null service '${name}'`);\n            return false;\n        }\n\n        //\n\n        service.world = this.world;\n        this.#services[name] = service;\n        this.#services[name].init();\n\n        return true;\n    }\n\n    getServices(){\n        return this.#services;\n    }\n\n    getService(serviceName){\n\n        if(!this.#services[serviceName]){\n            throw Error(`Cannot get unregistered service '${serviceName}'`);\n            return false;\n        }\n\n        return this.#services[serviceName];\n    }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ServiceManager);\n\n//# sourceURL=webpack://typescript-practice/./vendor/pluglightjs/ServiceManager.js?")},"./vendor/pluglightjs/World.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _AgentPool_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AgentPool.js */ "./vendor/pluglightjs/AgentPool.js");\n/* harmony import */ var _CollectionManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CollectionManager.js */ "./vendor/pluglightjs/CollectionManager.js");\n/* harmony import */ var _EventManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./EventManager.js */ "./vendor/pluglightjs/EventManager.js");\n/* harmony import */ var _ServiceManager_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ServiceManager.js */ "./vendor/pluglightjs/ServiceManager.js");\n\n\n\n\n\nclass World {\n\n    #agentPool;\n    #collectionManager;\n    #serviceManager;\n    #eventManager;\n\n    constructor(){\n\n         // subordinate modules\n\n        this.#agentPool         = new _AgentPool_js__WEBPACK_IMPORTED_MODULE_0__["default"](this);\n        this.#collectionManager = new _CollectionManager_js__WEBPACK_IMPORTED_MODULE_1__["default"](this);\n        this.#eventManager      = new _EventManager_js__WEBPACK_IMPORTED_MODULE_2__["default"](this);\n        this.#serviceManager    = new _ServiceManager_js__WEBPACK_IMPORTED_MODULE_3__["default"](this);\n\n        //Iteration\n        this.lastTime = 10;\n        this.deltaTime = NaN;\n        this.fps = NaN;\n        this.frame = 0;\n        this.routine = () => {};\n        this.pause = false;\n    }\n\n    registerService(name,service){\n        return this.#serviceManager.registerService(name,service);\n    }\n\n    getServices(){\n        return this.#serviceManager.getServices();\n    }\n\n    getService(serviceName){\n        return this.#serviceManager.getService(serviceName);\n    }\n\n    registerCollection(name){\n        return this.#collectionManager.registerCollection(name);\n    }\n\n    getCollection(collectionName){\n        return this.#collectionManager.getCollection(collectionName);\n    }\n\n\n    addToCollection(collectionName,object){\n        return this.#collectionManager.addToCollection(collectionName,object);\n    }\n\n    removeFromCollection(collectionName,object){\n        return this.#collectionManager.cacheToBeRemoved(collectionName,object);\n    }\n\n    registerAgentType(typeName,prototype){\n        return this.#agentPool.registerType(typeName,prototype);\n    }\n\n    createAgent(typeName,details = undefined){\n\n        let agent = this.#agentPool.createAgent(typeName,details);\n        \n        let collections = this.#agentPool.getCollectionsOfType(typeName);\n\n        collections.forEach((collection) => {\n            this.addToCollection(collection, agent);\n        });\n\n        return agent;\n    }\n\n    removeAgent(agent){\n        this.#agentPool.storeToBeRemoved(agent);\n    }\n\n    registerEvent(eventName){\n        this.#eventManager.registerEvent(eventName);\n    }\n\n    registerServiceToEvent(serviceName,eventName){\n        this.#eventManager.registerServiceToEvent(serviceName,eventName);\n    }\n\n    notifyEvent(eventName,details){\n        this.#eventManager.notifyToServices(eventName,details);\n    }\n\n    execute(timeSpan = 20){\n        \n        try{\n\n            if(this.pause) return;\n            \n            this.deltaTime = timeSpan - this.lastTime;\n\n            this.fps = 1000 / this.deltaTime;\n\n            if(this.frame % 5 === 0) document.getElementById("fps-counter").innerHTML = `FPS: ${this.fps.toFixed(2)} | Waiting for Players...`;\n\n            this.lastTime = timeSpan;\n\n            requestAnimationFrame((timeSpan) => { this.execute(timeSpan) });\n\n            this.#agentPool.removeAgents();\n            this.#collectionManager.removeAgentsFromCollections();\n            var services = this.getServices();\n\n            Object.keys(services).forEach((service) => {\n                    services[service].execute();\n            });\n\n            this.routine(this);\n            this.frame++;\n\n        }\n        catch(err){\n            this.pauseExecution();\n            console.warn(\'Execution paused due to run-time error:\');\n            throw err;\n        }\n    }\n\n    pauseExecution(){\n        this.pause = true;\n    }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (World);\n\n//# sourceURL=webpack://typescript-practice/./vendor/pluglightjs/World.js?')}},__webpack_module_cache__={};function __webpack_require__(e){var _=__webpack_module_cache__[e];if(void 0!==_)return _.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,_)=>{for(var n in _)__webpack_require__.o(_,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:_[n]})},__webpack_require__.o=(e,_)=>Object.prototype.hasOwnProperty.call(e,_),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./lib/Mirroware.js")})();